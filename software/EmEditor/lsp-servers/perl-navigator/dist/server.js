(()=>{var n={9593:(e,t,n)=>{"use strict";const r=n(4411),o=Symbol("max"),s=Symbol("length"),a=Symbol("lengthCalculator"),c=Symbol("allowStale"),u=Symbol("maxAge"),l=Symbol("dispose"),d=Symbol("noDisposeOnSet"),h=Symbol("lruList"),p=Symbol("cache"),i=Symbol("updateAgeOnGet"),f=()=>1,g=(e,t,n)=>{var r=e[p].get(t);if(r){const t=r.value;if(m(e,t)){if(v(e,r),!e[c])return}else n&&(e[i]&&(r.value.now=Date.now()),e[h].unshiftNode(r));return t.value}},m=(e,t)=>{var n;return!(!t||!t.maxAge&&!e[u])&&(n=Date.now()-t.now,t.maxAge?n>t.maxAge:e[u]&&n>e[u])},y=t=>{if(t[s]>t[o])for(let e=t[h].tail;t[s]>t[o]&&null!==e;){var n=e.prev;v(t,e),e=n}},v=(e,t)=>{var n;t&&(n=t.value,e[l]&&e[l](n.key,n.value),e[s]-=n.length,e[p].delete(n.key),e[h].removeNode(t))};class b{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const R=(e,t,n,r)=>{let i=n.value;m(e,i)&&(v(e,n),e[c]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};e.exports=class{constructor(e){if((e=(e="number"==typeof e?{max:e}:e)||{}).max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;var t=e.length||f;if(this[a]="function"!=typeof t?f:t,this[c]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[l]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[i]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,y(this)}get max(){return this[o]}set allowStale(e){this[c]=!!e}get allowStale(){return this[c]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,y(this)}get maxAge(){return this[u]}set lengthCalculator(e){(e="function"!=typeof e?f:e)!==this[a]&&(this[a]=e,this[s]=0,this[h].forEach(e=>{e.length=this[a](e.value,e.key),this[s]+=e.length})),y(this)}get lengthCalculator(){return this[a]}get length(){return this[s]}get itemCount(){return this[h].length}rforEach(t,n){n=n||this;for(let e=this[h].tail;null!==e;){var r=e.prev;R(this,t,e,n),e=r}}forEach(t,n){n=n||this;for(let e=this[h].head;null!==e;){var r=e.next;R(this,t,e,n),e=r}}keys(){return this[h].toArray().map(e=>e.key)}values(){return this[h].toArray().map(e=>e.value)}reset(){this[l]&&this[h]&&this[h].length&&this[h].forEach(e=>this[l](e.key,e.value)),this[p]=new Map,this[h]=new r,this[s]=0}dump(){return this[h].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[h]}set(e,t,n){if((n=n||this[u])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,i=this[a](t,e);if(this[p].has(e)){if(i>this[o])return v(this,this[p].get(e)),!1;const a=this[p].get(e).value;return!this[l]||this[d]||this[l](e,a.value),a.now=r,a.maxAge=n,a.value=t,this[s]+=i-a.length,a.length=i,this.get(e),y(this),!0}i=new b(e,t,i,r,n);return i.length>this[o]?(this[l]&&this[l](e,t),!1):(this[s]+=i.length,this[h].unshift(i),this[p].set(e,this[h].head),y(this),!0)}has(e){return!!this[p].has(e)&&(e=this[p].get(e).value,!m(this,e))}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){var e=this[h].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[p].get(e))}load(t){this.reset();var n=Date.now();for(let e=t.length-1;0<=e;e--){var r=t[e],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const t=i-n;0<t&&this.set(r.k,r.v,t)}}}prune(){this[p].forEach((e,t)=>g(this,t,!1))}}},3870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.Trace=t.ProgressType=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.RAL=void 0,t.CancellationStrategy=void 0;const r=n(839),i=(Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}}),n(3911)),o=(Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return i.Disposable}}),n(7135)),s=(Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return o.Emitter}}),n(3881)),a=(Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}}),n(6525)),c=(Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}}),n(6654)),u=(Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}}),n(1343));Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return u.CancellationStrategy}});n=n(147);t.RAL=n.default},3881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(147),i=n(7574),o=n(7135);var s,a;(a=s=t.CancellationToken||(t.CancellationToken={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),a.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),a.is=function(e){return e&&(e===a.None||e===a.Cancelled||i.boolean(e.isCancellationRequested)&&!!e.onCancellationRequested)};const c=Object.freeze(function(e,t){const n=r.default().timer.setTimeout(e.bind(t),0);return{dispose(){r.default().timer.clearTimeout(n)}}});class u{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?c:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new u),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof u&&this._token.dispose():this._token=s.None}}},1343:(e,z,t)=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.createMessageConnection=z.ConnectionOptions=z.CancellationStrategy=z.CancellationSenderStrategy=z.CancellationReceiverStrategy=z.ConnectionStrategy=z.ConnectionError=z.ConnectionErrors=z.LogTraceNotification=z.SetTraceNotification=z.TraceFormat=z.Trace=z.NullLogger=z.ProgressType=void 0;const B=t(147),V=t(7574),J=t(839),G=t(6184),Z=t(7135),Y=t(3881);var X,Q,ee,te,ne,re,ie,oe,n,r,i,se,ae,o,s;(X=X||{}).type=new J.NotificationType("$/cancelRequest"),(Q=Q||{}).type=new J.NotificationType("$/progress"),z.ProgressType=class{constructor(){}},(ee||(ee={})).is=function(e){return V.func(e)},z.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),(t=te=z.Trace||(z.Trace={}))[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose",(s=te=z.Trace||(z.Trace={})).fromString=function(e){if(!V.string(e))return s.Off;switch(e=e.toLowerCase()){case"off":default:return s.Off;case"messages":return s.Messages;case"verbose":return s.Verbose}},s.toString=function(e){switch(e){case s.Off:return"off";case s.Messages:return"messages";case s.Verbose:return"verbose";default:return"off"}},(t=z.TraceFormat||(z.TraceFormat={})).Text="text",t.JSON="json",(o=ne=z.TraceFormat||(z.TraceFormat={})).fromString=function(e){return"json"===(e=e.toLowerCase())?o.JSON:o.Text},(re=z.SetTraceNotification||(z.SetTraceNotification={})).type=new J.NotificationType("$/setTrace"),(ie=z.LogTraceNotification||(z.LogTraceNotification={})).type=new J.NotificationType("$/logTrace"),(t=oe=z.ConnectionErrors||(z.ConnectionErrors={}))[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening";class ce extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,ce.prototype)}}z.ConnectionError=ce,(n=z.ConnectionStrategy||(z.ConnectionStrategy={})).is=function(e){return e&&V.func(e.cancelUndispatched)},(t=r=z.CancellationReceiverStrategy||(z.CancellationReceiverStrategy={})).Message=Object.freeze({createCancellationTokenSource:e=>new Y.CancellationTokenSource}),t.is=function(e){return e&&V.func(e.createCancellationTokenSource)},(t=i=z.CancellationSenderStrategy||(z.CancellationSenderStrategy={})).Message=Object.freeze({sendCancellation(e,t){e.sendNotification(X.type,{id:t})},cleanup(e){}}),t.is=function(e){return e&&V.func(e.sendCancellation)&&V.func(e.cleanup)},(t=se=z.CancellationStrategy||(z.CancellationStrategy={})).Message=Object.freeze({receiver:r.Message,sender:i.Message}),t.is=function(e){return e&&r.is(e.receiver)&&i.is(e.sender)},(z.ConnectionOptions||(z.ConnectionOptions={})).is=function(e){return e&&(se.is(e.cancellationStrategy)||n.is(e.connectionStrategy))},(t=ae=ae||{})[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed",z.createMessageConnection=function(e,p,t,a){const c=void 0!==t?t:z.NullLogger;let F=0,L=0,I=0;const f="2.0";let g;const m=Object.create(null);let o;const s=Object.create(null),r=new Map;let n,y,u=new G.LinkedMap,l=Object.create(null),v=Object.create(null),b=te.Off,R=ne.Text,i=ae.New;const d=new Z.Emitter,h=new Z.Emitter,w=new Z.Emitter,_=new Z.Emitter,P=new Z.Emitter,T=a&&a.cancellationStrategy?a.cancellationStrategy:se.Message;function C(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function A(e){}function S(){return i===ae.Listening}function k(){return i===ae.Closed}function D(){return i===ae.Disposed}function x(){i!==ae.New&&i!==ae.Listening||(i=ae.Closed,h.fire(void 0))}function W(){n||0===u.size||(n=B.default().timer.setImmediate(()=>{if(n=void 0,0!==u.size){var e=u.shift();try{(J.isRequestMessage(e)?function(i){if(!D()){var r,o,s,a=i;if(b!==te.Off&&y)if(R===ne.Text){let e;b===te.Verbose&&a.params&&(e=`Params: ${JSON.stringify(a.params,null,4)}

`),y.log(`Received request '${a.method} - (${a.id})'.`,e)}else E("receive-request",a);const l=m[i.method];let t,n;l&&(t=l.type,n=l.handler);const d=Date.now();if(n||g){const l=String(i.id),h=T.receiver.createCancellationTokenSource(l);v[l]=h;try{let e;if(n)if(void 0===i.params){if(void 0!==t&&0!==t.numberOfParams)return u(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${i.method} defines ${t.numberOfParams} params but recevied none.`),i.method,d);e=n(h.token)}else if(Array.isArray(i.params)){if(void 0!==t&&t.parameterStructures===J.ParameterStructures.byName)return u(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${i.method} defines parameters by name but received parameters by position`),i.method,d);e=n(...i.params,h.token)}else{if(void 0!==t&&t.parameterStructures===J.ParameterStructures.byPosition)return u(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${i.method} defines parameters by position but received parameters by name`),i.method,d);e=n(i.params,h.token)}else g&&(e=g(i.method,i.params,h.token));const te=e;e?te.then?te.then(e=>{delete v[l],c(e,i.method,d)},e=>{delete v[l],e instanceof J.ResponseError?u(e,i.method,d):e&&V.string(e.message)?u(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${i.method} failed with message: `+e.message),i.method,d):u(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${i.method} failed unexpectedly without providing any details.`),i.method,d)}):(delete v[l],c(e,i.method,d)):(delete v[l],r=e,o=i.method,s=d,void 0===r&&(r=null),q(r={jsonrpc:f,id:i.id,result:r},o,s),p.write(r))}catch(e){delete v[l],e instanceof J.ResponseError?c(e,i.method,d):e&&V.string(e.message)?u(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${i.method} failed with message: `+e.message),i.method,d):u(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${i.method} failed unexpectedly without providing any details.`),i.method,d)}}else u(new J.ResponseError(J.ErrorCodes.MethodNotFound,"Unhandled method "+i.method),i.method,d);function c(e,t,n){var r={jsonrpc:f,id:i.id};e instanceof J.ResponseError?r.error=e.toJson():r.result=void 0===e?null:e,q(r,t,n),p.write(r)}function u(e,t,n){e={jsonrpc:f,id:i.id,error:e.toJson()};q(e,t,n),p.write(e)}}}:J.isNotificationMessage(e)?function(n){if(!D()){let e,t;var r;if(n.method===X.type.method?t=e=>{e=e.id,e=v[String(e)];e&&e.cancel()}:(r=s[n.method])&&(t=r.handler,e=r.type),t||o)try{var i=n;if(b!==te.Off&&y&&i.method!==ie.type.method)if(R===ne.Text){let e;b===te.Verbose&&(e=i.params?`Params: ${JSON.stringify(i.params,null,4)}

`:"No parameters provided.\n\n"),y.log(`Received notification '${i.method}'.`,e)}else E("receive-notification",i);t?void 0===n.params?(void 0!==e&&0!==e.numberOfParams&&e.parameterStructures!==J.ParameterStructures.byName&&c.error(`Notification ${n.method} defines ${e.numberOfParams} params but recevied none.`),t()):Array.isArray(n.params)?(void 0!==e&&(e.parameterStructures===J.ParameterStructures.byName&&c.error(`Notification ${n.method} defines parameters by name but received parameters by position`),e.numberOfParams!==n.params.length)&&c.error(`Notification ${n.method} defines ${e.numberOfParams} params but received ${n.params.length} argumennts`),t(...n.params)):(void 0!==e&&e.parameterStructures===J.ParameterStructures.byPosition&&c.error(`Notification ${n.method} defines parameters by position but received parameters by name`),t(n.params)):o&&o(n.method,n.params)}catch(e){e.message?c.error(`Notification handler '${n.method}' failed with message: `+e.message):c.error(`Notification handler '${n.method}' failed unexpectedly.`)}else w.fire(n)}}:J.isResponseMessage(e)?function(e){if(!D())if(null===e.id)e.error?c.error(`Received response message without id: Error is: 
`+JSON.stringify(e.error,void 0,4)):c.error("Received response message without id. No further error information provided.");else{var t,n=String(e.id),r=l[n],i=e,o=r;if(b!==te.Off&&y)if(R===ne.Text){let e;b===te.Verbose&&(i.error&&i.error.data?e=`Error data: ${JSON.stringify(i.error.data,null,4)}

`:i.result?e=`Result: ${JSON.stringify(i.result,null,4)}

`:void 0===i.error&&(e="No result returned.\n\n")),o?(t=i.error?` Request failed: ${i.error.message} (${i.error.code}).`:"",y.log(`Received response '${o.method} - (${i.id})' in ${Date.now()-o.timerStart}ms.`+t,e)):y.log(`Received response ${i.id} without active response promise.`,e)}else E("receive-response",i);if(r){delete l[n];try{if(e.error){var s=e.error;r.reject(new J.ResponseError(s.code,s.message,s.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?c.error(`Response handler '${r.method}' failed with message: `+e.message):c.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}:function(e){if(!e)return c.error("Received empty message.");c.error(`Received message which is neither a response nor a notification message:
`+JSON.stringify(e,null,4));var t=e;if(V.string(t.id)||V.number(t.id)){const e=String(t.id),n=l[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}})(e)}finally{W()}}}))}e.onClose(x),e.onError(function(e){d.fire([e,void 0,void 0])}),p.onClose(x),p.onError(function(e){d.fire(e)});const $=e=>{try{if(J.isNotificationMessage(e)&&e.method===X.type.method){var t=C(e.params.id),n=u.get(t);if(J.isRequestMessage(n)){const s=null==a?void 0:a.connectionStrategy,J=s&&s.cancelUndispatched?s.cancelUndispatched(n,A):void 0;if(J&&(void 0!==J.error||void 0!==J.result))return u.delete(t),J.id=n.id,q(J,e.method,Date.now()),void p.write(J)}}r=u,i=e,J.isRequestMessage(i)?r.set(C(i.id),i):J.isResponseMessage(i)?r.set(null===(o=i.id)?"res-unknown-"+(++I).toString():"res-"+o.toString(),i):r.set("not-"+(++L).toString(),i)}finally{W()}var r,i,o};function q(t,n,r){if(b!==te.Off&&y)if(R===ne.Text){let e;b===te.Verbose&&(t.error&&t.error.data?e=`Error data: ${JSON.stringify(t.error.data,null,4)}

`:t.result?e=`Result: ${JSON.stringify(t.result,null,4)}

`:void 0===t.error&&(e="No result returned.\n\n")),y.log(`Sending response '${n} - (${t.id})'. Processing request took ${Date.now()-r}ms`,e)}else E("send-response",t)}function E(e,t){y&&b!==te.Off&&(e={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()},y.log(e))}function O(){if(k())throw new ce(oe.Closed,"Connection is closed.");if(D())throw new ce(oe.Disposed,"Connection is disposed.")}function N(e){return void 0===e?null:e}function H(e){return null===e?void 0:e}function K(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function M(e,t){switch(e){case J.ParameterStructures.auto:return K(t)?H(t):[N(t)];case J.ParameterStructures.byName:if(K(t))return H(t);throw new Error("Recevied parameters by name but param is not an object literal.");case J.ParameterStructures.byPosition:return[N(t)];default:throw new Error("Unknown parameter structure "+e.toString())}}function U(e,t){let n;var r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=M(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(N(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const j={sendNotification:(n,...r)=>{let i,o;if(O(),V.string(n)){i=n;const p=r[0];let e=0,t=J.ParameterStructures.auto;J.ParameterStructures.is(p)&&(e=1,t=p);var s=r.length,a=s-e;switch(a){case 0:o=void 0;break;case 1:o=M(t,r[e]);break;default:if(t===J.ParameterStructures.byName)throw new Error(`Recevied ${a} parameters for 'by Name' notification parameter structure.`);o=r.slice(e,s).map(e=>N(e))}}else{const p=r;i=n.method,o=U(n,p)}var n={jsonrpc:f,method:i,params:o},t=n;if(b!==te.Off&&y)if(R===ne.Text){let e;b===te.Verbose&&(e=t.params?`Params: ${JSON.stringify(t.params,null,4)}

`:"No parameters provided.\n\n"),y.log(`Sending notification '${t.method}'.`,e)}else E("send-notification",t);p.write(n)},onNotification:(e,t)=>{let n;return O(),V.func(e)?o=e:t&&(V.string(e)?(n=e,s[e]={type:void 0,handler:t}):(n=e.method,s[e.method]={type:e,handler:t})),{dispose:()=>{void 0!==n?delete s[n]:o=void 0}}},onProgress:(e,t,n)=>{if(r.has(t))throw new Error(`Progress handler for token ${t} already registered`);return r.set(t,n),{dispose:()=>{r.delete(t)}}},sendProgress:(e,t,n)=>{j.sendNotification(Q.type,{token:t,value:n})},onUnhandledProgress:_.event,sendRequest:(r,...i)=>{let o,s,a;if(O(),!S())throw new Error("Call listen() first.");if(V.string(r)){o=r;const p=i[0],V=i[i.length-1];let e=0,t=J.ParameterStructures.auto,n=(J.ParameterStructures.is(p)&&(e=1,t=p),i.length);Y.CancellationToken.is(V)&&(--n,a=V);const te=n-e;switch(te){case 0:s=void 0;break;case 1:s=M(t,i[e]);break;default:if(t===J.ParameterStructures.byName)throw new Error(`Recevied ${te} parameters for 'by Name' request parameter structure.`);s=i.slice(e,n).map(e=>N(e))}}else{const p=i,V=(o=r.method,s=U(r,p),r.numberOfParams);a=Y.CancellationToken.is(p[V])?p[V]:void 0}const c=F++;let u;return a&&(u=a.onCancellationRequested(()=>{T.sender.sendCancellation(j,c)})),new Promise((t,n)=>{var e={jsonrpc:f,id:c,method:o,params:s};let r={method:o,timerStart:Date.now(),resolve:e=>{t(e),T.sender.cleanup(c),null!=u&&u.dispose()},reject:e=>{n(e),T.sender.cleanup(c),null!=u&&u.dispose()}};var i=e;if(b!==te.Off&&y)if(R===ne.Text){let e;b===te.Verbose&&i.params&&(e=`Params: ${JSON.stringify(i.params,null,4)}

`),y.log(`Sending request '${i.method} - (${i.id})'.`,e)}else E("send-request",i);try{p.write(e)}catch(t){r.reject(new J.ResponseError(J.ErrorCodes.MessageWriteError,t.message||"Unknown reason")),r=null}r&&(l[String(c)]=r)})},onRequest:(e,t)=>{O();let n=null;return ee.is(e)?(n=void 0,g=e):V.string(e)?(n=null,void 0!==t&&(n=e,m[e]={handler:t,type:void 0})):void 0!==t&&(n=e.method,m[e.method]={type:e,handler:t}),{dispose:()=>{null!==n&&(void 0!==n?delete m[n]:g=void 0)}}},trace:(e,t,n)=>{let r=!1,i=ne.Text;void 0!==n&&(V.boolean(n)?r=n:(r=n.sendNotification||!1,i=n.traceFormat||ne.Text)),b=e,R=i,y=b===te.Off?void 0:t,!r||k()||D()||j.sendNotification(re.type,{value:te.toString(e)})},onError:d.event,onClose:h.event,onUnhandledNotification:w.event,onDispose:P.event,end:()=>{p.end()},dispose:()=>{if(!D()){i=ae.Disposed,P.fire(void 0);const t=new Error("Connection got disposed.");Object.keys(l).forEach(e=>{l[e].reject(t)}),l=Object.create(null),v=Object.create(null),u=new G.LinkedMap,V.func(p.dispose)&&p.dispose(),V.func(e.dispose)&&e.dispose()}},listen:()=>{if(O(),S())throw new ce(oe.AlreadyListening,"Connection is already listening");i=ae.Listening,e.listen($)},inspect:()=>{B.default().console.log("inspect")}};return j.onNotification(ie.type,e=>{b!==te.Off&&y&&y.log(e.message,b===te.Verbose?e.verbose:void 0)}),j.onNotification(Q.type,e=>{var t=r.get(e.token);t?t(e.value):_.fire(e)}),j}},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},7135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const s=n(147);{n=t.Event||(t.Event={});const r={dispose(){}};n.None=function(){return r}}class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(r,i=null){if(this._callbacks){let n=!1;for(let e=0,t=this._callbacks.length;e<t;e++)if(this._callbacks[e]===r){if(this._contexts[e]===i)return this._callbacks.splice(e,1),void this._contexts.splice(e,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...n){if(!this._callbacks)return[];var r=[],i=this._callbacks.slice(0),o=this._contexts.slice(0);for(let e=0,t=i.length;e<t;e++)try{r.push(i[e].apply(o[e],n))}catch(n){s.default().console.error(n)}return r}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=o._noop,this._options)&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}(t.Emitter=o)._noop=function(){}},7574:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every(e=>n(e))}},6184:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,(n=i=t.Touch||(t.Touch={})).None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last;class r{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null==(e=this._head)?void 0:e.value}get last(){var e;return null==(e=this._tail)?void 0:e.value}has(e){return this._map.has(e)}get(e,t=i.None){e=this._map.get(e);if(e)return t!==i.None&&this.touch(e,t),e.value}set(e,t,n=i.None){let r=this._map.get(e);if(r)r.value=t,n!==i.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;default:i.Last;this.addItemLast(r)}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){var t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(this._head||this._tail){var e;if(this._head&&this._tail)return e=this._head,this._map.delete(e.key),this.removeItem(e),this._size--,e.value;throw new Error("Invalid list")}}forEach(e,t){var n=this._state;let r=this._head;for(;r;){if((t?e.bind(t):e)(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(n){if(!(n>=this.size))if(0===n)this.clear();else{let e=this._head,t=this.size;for(;e&&t>n;)this._map.delete(e.key),e=e.next,t--;this._head=e,this._size=t,e&&(e.previous=void 0),this._state++}}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{var t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");(t.previous=n).next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===i.First||t===i.Last)if(t===i.First){if(e!==this._head){const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i).next=t,e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}}else if(t===i.Last&&e!==this._tail){const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i).next=t,e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const n=[];return this.forEach((e,t)=>{n.push([t,e])}),n}fromJSON(e){this.clear();for(var[t,n]of e)this.set(t,n)}}t.LinkedMap=r,t.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=i.AsNew){return super.get(e,t)}peek(e){return super.get(e,i.None)}set(e,t){return super.set(e,t,i.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},5530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){e="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(e),this._totalLength+=e.byteLength}tryReadHeaders(){if(0!==this._chunks.length){let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4===e){const i=this._read(r+n),o=new Map,s=this.toString(i,"ascii").split("\r\n");if(!(s.length<2))for(let r=0;r<s.length-2;r++){const e=s[r],t=e.indexOf(":");if(-1===t)throw new Error("Message header must separate key and value using :");const n=e.substr(0,t),i=e.substr(t+1).trim();o.set(n,i)}return o}}}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;0<e;){var r,i=this._chunks[0];i.byteLength>e?(r=i.slice(0,e),t.set(r,n),n+=e,this._chunks[0]=i.slice(e),this._totalLength-=e,e-=e):(t.set(i,n),n+=i.byteLength,this._chunks.shift(),this._totalLength-=i.byteLength,e-=i.byteLength)}return t}}},6525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const a=n(147),r=n(7574),i=n(7135);var o;(t.MessageReader||(t.MessageReader={})).is=function(e){return e&&r.func(e.listen)&&r.func(e.dispose)&&r.func(e.onError)&&r.func(e.onClose)&&r.func(e.onPartialMessage)};class s{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error("Reader received error. Reason: "+(r.string(e.message)?e.message:"unknown"))}}t.AbstractMessageReader=s,(o||(o={})).fromOptions=function(e){var t;let n,r;var i=new Map;let o;var s=new Map;if(void 0===e||"string"==typeof e)n=null!=e?e:"utf-8";else{if(n=null!=(t=e.charset)?t:"utf-8",void 0!==e.contentDecoder&&(r=e.contentDecoder,i.set(r.name,r)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=a.default().applicationJson.decoder,s.set(o.name,o)),{charset:n,contentDecoder:r,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}},t.ReadableStreamMessageReader=class extends s{constructor(e,t){super(),this.readable=e,this.options=o.fromOptions(t),this.buffer=a.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;e=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),e}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;var t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");t=parseInt(t);if(isNaN(t))throw new Error("Content-Length value must be a number.");this.nextMessageLength=t}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,(void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e)).then(e=>{this.options.contentTypeDecoder.decode(e,this.options).then(e=>{this.callback(e)},e=>{this.fireError(e)})},e=>{this.fireError(e)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(a.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=a.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},6654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(147),i=n(7574),o=n(142),s=n(7135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){return e&&i.func(e.dispose)&&i.func(e.onClose)&&i.func(e.onError)&&i.func(e.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error("Writer received error. Reason: "+(i.string(e.message)?e.message:"unknown"))}}t.AbstractMessageWriter=c,(a||(a={})).fromOptions=function(e){var t;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:r.default().applicationJson.encoder}:{charset:null!=(t=e.charset)?t:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!=(t=e.contentTypeEncoder)?t:r.default().applicationJson.encoder}},t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(n){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(n,this.options).then(e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e).then(e=>{var t=[];return t.push("Content-Length: ",e.byteLength.toString(),"\r\n"),t.push("\r\n"),this.doWrite(n,t,e)},e=>{throw this.fireError(e),e}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponseMessage=t.isNotificationMessage=t.isRequestMessage=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(7574);var i;(n=i=t.ErrorCodes||(t.ErrorCodes={})).ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=n.jsonrpcReservedErrorRangeStart,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=n.jsonrpcReservedErrorRangeEnd;class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e){this.kind=e}static is(e){return e===s.auto||e===s.byName||e===s.byPosition}toString(){return this.kind}}(t.ParameterStructures=s).auto=new s("auto"),s.byPosition=new s("byPosition"),s.byName=new s("byName");class a{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return s.auto}}t.AbstractMessageSignature=a,t.RequestType0=class extends a{constructor(e){super(e,0)}},t.RequestType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends a{constructor(e){super(e,2)}},t.RequestType3=class extends a{constructor(e){super(e,3)}},t.RequestType4=class extends a{constructor(e){super(e,4)}},t.RequestType5=class extends a{constructor(e){super(e,5)}},t.RequestType6=class extends a{constructor(e){super(e,6)}},t.RequestType7=class extends a{constructor(e){super(e,7)}},t.RequestType8=class extends a{constructor(e){super(e,8)}},t.RequestType9=class extends a{constructor(e){super(e,9)}},t.NotificationType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends a{constructor(e){super(e,0)}},t.NotificationType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends a{constructor(e){super(e,2)}},t.NotificationType3=class extends a{constructor(e){super(e,3)}},t.NotificationType4=class extends a{constructor(e){super(e,4)}},t.NotificationType5=class extends a{constructor(e){super(e,5)}},t.NotificationType6=class extends a{constructor(e){super(e,6)}},t.NotificationType7=class extends a{constructor(e){super(e,7)}},t.NotificationType8=class extends a{constructor(e){super(e,8)}},t.NotificationType9=class extends a{constructor(e){super(e,9)}},t.isRequestMessage=function(e){return e&&r.string(e.method)&&(r.string(e.id)||r.number(e.id))},t.isNotificationMessage=function(e){var t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){return e&&(void 0!==e.result||!!e.error)&&(r.string(e.id)||r.number(e.id)||null===e.id)}},147:(e,t)=>{"use strict";let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),(r||(r={})).install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e},t.default=r},142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(n){return new Promise((e,t)=>{this._waiting.push({thunk:n,resolve:e,reject:t}),this.runNext()})}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&r.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(0!==this._waiting.length&&this._active!==this._capacity){const t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{var e=t.thunk();e instanceof Promise?e.then(e=>{this._active--,t.resolve(e),this.runNext()},e=>{this._active--,t.reject(e),this.runNext()}):(this._active--,t.resolve(e),this.runNext())}catch(e){this._active--,t.reject(e),this.runNext()}}}}},4389:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const o=n(3034),s=(o.default.install(),n(3870)),a=n(1017),c=n(2037),u=n(6113),l=n(1808);i(n(3870),t);class d extends s.AbstractMessageReader{constructor(e){super(),this.process=e;e=this.process;e.on("error",e=>this.fireError(e)),e.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),s.Disposable.create(()=>this.process.off("message",e))}}t.IPCMessageReader=d;class h extends s.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;e=this.process;e.on("error",e=>this.fireError(e)),e.on("close",()=>this.fireClose)}write(t){try{return"function"==typeof this.process.send&&this.process.send(t,void 0,void 0,e=>{e?(this.errorCount++,this.handleError(e,t)):this.errorCount=0}),Promise.resolve()}catch(e){return this.handleError(e,t),Promise.reject(e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=h;class p extends s.ReadableStreamMessageReader{constructor(e,t="utf-8"){super(o.default().stream.asReadableStream(e),t)}}t.SocketMessageReader=p;class f extends s.WriteableStreamMessageWriter{constructor(e,t){super(o.default().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=f;class g extends s.ReadableStreamMessageReader{constructor(e,t){super(o.default().stream.asReadableStream(e),t)}}t.StreamMessageReader=g;class m extends s.WriteableStreamMessageWriter{constructor(e,t){super(o.default().stream.asWritableStream(e),t)}}t.StreamMessageWriter=m;const y=process.env.XDG_RUNTIME_DIR,v=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){var e,t=u.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`:(t=y?a.join(y,`vscode-ipc-${t}.sock`):a.join(c.tmpdir(),`vscode-${t}.sock`),void 0!==(e=v.get(process.platform))&&t.length>=e&&o.default().console.warn(`WARNING: IPC handle "${t}" is longer than ${e} characters.`),t)},t.createClientPipeTransport=function(r,i="utf-8"){let o;const s=new Promise((e,t)=>{o=e});return new Promise((e,t)=>{let n=l.createServer(e=>{n.close(),o([new p(e,i),new f(e,i)])});n.on("error",t),n.listen(r,()=>{n.removeListener("error",t),e({onConnected:()=>s})})})},t.createServerPipeTransport=function(e,t="utf-8"){e=l.createConnection(e);return[new p(e,t),new f(e,t)]},t.createClientSocketTransport=function(r,i="utf-8"){let o;const s=new Promise((e,t)=>{o=e});return new Promise((e,t)=>{const n=l.createServer(e=>{n.close(),o([new p(e,i),new f(e,i)])});n.on("error",t),n.listen(r,"127.0.0.1",()=>{n.removeListener("error",t),e({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){e=l.createConnection(e,"127.0.0.1");return[new p(e,t),new f(e,t)]},t.createMessageConnection=function(e,t,n,r){n=n||s.NullLogger;e=void 0!==e.read&&void 0!==e.addListener?new g(e):e,t=void 0!==t.write&&void 0!==t.addListener?new m(t):t;return s.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),s.createMessageConnection(e,t,n,r)}},3034:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(147),i=n(3837),o=n(3911),s=n(5530);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new i.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}a.emptyBuffer=Buffer.allocUnsafe(0);class c{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),o.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),o.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),o.Disposable.create(()=>this.stream.off("data",e))}}class u{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),o.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),o.Disposable.create(()=>this.stream.off("end",e))}write(r,i){return new Promise((t,n)=>{var e=e=>{null==e?t():n(e)};"string"==typeof r?this.stream.write(r,i,e):this.stream.write(r,e)})}end(){this.stream.end()}}const l=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new i.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new u(e)}),console:console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setImmediate(e,...t),clearImmediate(e){clearImmediate(e)}})});function d(){return l}(d||(d={})).install=function(){r.default.install(l)},t.default=d},5028:(e,t,n)=>{"use strict";e.exports=n(4389)},1661:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(n(4389),t),i(n(1674),t),i(n(6140),t),i(n(542),t);var o=n(3767);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return o.createProtocolConnection}}),(i=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,i.ContentModified=-32801,i.RequestCancelled=-32800,i.lspReservedErrorRangeEnd=-32800},3767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const i=n(4389);t.createProtocolConnection=function(e,t,n,r){return i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),i.createMessageConnection(e,t,n,r)}},6140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=void 0;const r=n(4389);t.RegistrationType=class{constructor(e){this.method=e}};class i extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=i;class o extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=s;class a extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=a},2918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;var r,n=n(6140);(r=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",r.type=new n.ProtocolRequestType(r.method),(r=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",r.type=new n.ProtocolRequestType(r.method),(r=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",r.type=new n.ProtocolRequestType(r.method)},3390:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;var r,n=n(6140);(r=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",r.type=new n.ProtocolRequestType(r.method),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new n.ProtocolRequestType("textDocument/colorPresentation")},5934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;n=n(6140);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new n.ProtocolRequestType("workspace/configuration")},764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;n=n(6140);(t=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",t.type=new n.ProtocolRequestType(t.method)},7846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;var r,n=n(6140);(r=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",r.folder="folder",(r=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",r.type=new n.ProtocolRequestType(r.method),(r=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",r.type=new n.ProtocolNotificationType(r.method),(r=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",r.type=new n.ProtocolRequestType(r.method),(r=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",r.type=new n.ProtocolNotificationType(r.method),(r=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",r.type=new n.ProtocolNotificationType(r.method),(r=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",r.type=new n.ProtocolRequestType(r.method)},3394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=t.FoldingRangeKind=void 0;var r,n=n(6140);(r=t.FoldingRangeKind||(t.FoldingRangeKind={})).Comment="comment",r.Imports="imports",r.Region="region",(r=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",r.type=new n.ProtocolRequestType(r.method)},2122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;n=n(6140);(t=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",t.type=new n.ProtocolRequestType(t.method)},542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeError=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.DocumentFilter=void 0,t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=void 0;const r=n(9533),i=n(6140),o=n(2122),s=(Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return o.ImplementationRequest}}),n(1589)),a=(Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}}),n(9795)),c=(Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return a.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return a.DidChangeWorkspaceFoldersNotification}}),n(5934)),u=(Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}}),n(3390)),l=(Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return u.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return u.ColorPresentationRequest}}),n(3394)),d=(Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return l.FoldingRangeRequest}}),n(764)),h=(Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return d.DeclarationRequest}}),n(5206)),p=(Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}}),n(1862)),f=(Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return p.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return p.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return p.WorkDoneProgressCancelNotification}}),n(2918)),g=(Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return f.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return f.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return f.CallHierarchyPrepareRequest}}),n(9434)),m=(Object.defineProperty(t,"SemanticTokenTypes",{enumerable:!0,get:function(){return g.SemanticTokenTypes}}),Object.defineProperty(t,"SemanticTokenModifiers",{enumerable:!0,get:function(){return g.SemanticTokenModifiers}}),Object.defineProperty(t,"SemanticTokens",{enumerable:!0,get:function(){return g.SemanticTokens}}),Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return g.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return g.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return g.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return g.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return g.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return g.SemanticTokensRegistrationType}}),n(5726)),y=(Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return m.ShowDocumentRequest}}),n(6305)),v=(Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return y.LinkedEditingRangeRequest}}),n(7846)),b=(Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return v.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return v.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return v.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return v.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return v.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return v.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return v.WillDeleteFilesRequest}}),n(3443));var R,w;Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return b.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return b.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return b.MonikerRequest}}),(R=t.DocumentFilter||(t.DocumentFilter={})).is=function(e){return r.string(e.language)||r.string(e.scheme)||r.string(e.pattern)},(w=t.DocumentSelector||(t.DocumentSelector={})).is=function(e){if(!Array.isArray(e))return!1;for(var t of e)if(!r.string(t)&&!R.is(t))return!1;return!0},(t.RegistrationRequest||(t.RegistrationRequest={})).type=new i.ProtocolRequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new i.ProtocolRequestType("client/unregisterCapability"),(n=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",n.Rename="rename",n.Delete="delete",(n=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){return e&&r.string(e.id)&&0<e.id.length},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){return e&&(null===e.documentSelector||w.is(e.documentSelector))},(n=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){return r.objectLiteral(e)&&(void 0===e.workDoneProgress||r.boolean(e.workDoneProgress))},n.hasWorkDoneProgress=function(e){return e&&r.boolean(e.workDoneProgress)},(t.InitializeRequest||(t.InitializeRequest={})).type=new i.ProtocolRequestType("initialize"),(t.InitializeError||(t.InitializeError={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new i.ProtocolNotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new i.ProtocolRequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new i.ProtocolNotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeConfiguration"),(n=t.MessageType||(t.MessageType={})).Error=1,n.Warning=2,n.Info=3,n.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new i.ProtocolNotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new i.ProtocolRequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new i.ProtocolNotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new i.ProtocolNotificationType("telemetry/event"),(n=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,n.Full=1,n.Incremental=2,(n=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",n.type=new i.ProtocolNotificationType(n.method),(n=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)},n.isFull=function(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength},(n=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",n.type=new i.ProtocolNotificationType(n.method),(n=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",n.type=new i.ProtocolNotificationType(n.method),(n=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",n.type=new i.ProtocolNotificationType(n.method),(n=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,n.AfterDelay=2,n.FocusOut=3,(n=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",n.type=new i.ProtocolNotificationType(n.method),(n=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",n.type=new i.ProtocolRequestType(n.method),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(n=t.FileChangeType||(t.FileChangeType={})).Created=1,n.Changed=2,n.Deleted=3,(n=t.WatchKind||(t.WatchKind={})).Create=1,n.Change=2,n.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new i.ProtocolNotificationType("textDocument/publishDiagnostics"),(n=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3,(n=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",n.type=new i.ProtocolRequestType(n.method),(n=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",n.type=new i.ProtocolRequestType(n.method),(n=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",n.type=new i.ProtocolRequestType(n.method),(n=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,n.TriggerCharacter=2,n.ContentChange=3,(n=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",n.type=new i.ProtocolRequestType(n.method),(n=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",n.type=new i.ProtocolRequestType(n.method),(n=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",n.type=new i.ProtocolRequestType(n.method),(n=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",n.type=new i.ProtocolRequestType(n.method),(n=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",n.type=new i.ProtocolRequestType(n.method),(n=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",n.type=new i.ProtocolRequestType(n.method),(n=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",n.type=new i.ProtocolRequestType(n.method),(n=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",n.type=new i.ProtocolRequestType(n.method),(n=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",n.type=new i.ProtocolRequestType(n.method),(n=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",n.type=new i.ProtocolRequestType(n.method),(n=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",n.type=new i.ProtocolRequestType0(n.method),(n=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",n.type=new i.ProtocolRequestType(n.method),(n=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",n.type=new i.ProtocolRequestType(n.method),(n=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",n.type=new i.ProtocolRequestType(n.method),(n=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",n.type=new i.ProtocolRequestType(n.method),(n=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",n.type=new i.ProtocolRequestType(n.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(n=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",n.type=new i.ProtocolRequestType(n.method),(n=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",n.type=new i.ProtocolRequestType(n.method),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new i.ProtocolRequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new i.ProtocolRequestType("workspace/applyEdit")},6305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;n=n(6140);(t=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",t.type=new n.ProtocolRequestType(t.method)},3443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;var r,n=n(6140);(r=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",r.project="project",r.group="group",r.scheme="scheme",r.global="global",(r=t.MonikerKind||(t.MonikerKind={})).import="import",r.export="export",r.local="local",(r=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",r.type=new n.ProtocolRequestType(r.method)},1862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;var r,i=n(4389),n=n(6140);(r=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new i.ProgressType,r.is=function(e){return e===r.type},(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).type=new n.ProtocolRequestType("window/workDoneProgress/create"),(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).type=new n.ProtocolNotificationType("window/workDoneProgress/cancel")},5206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;n=n(6140);(t=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",t.type=new n.ProtocolRequestType(t.method)},9434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=void 0;var r,n=n(6140);(r=t.SemanticTokenTypes||(t.SemanticTokenTypes={})).namespace="namespace",r.type="type",r.class="class",r.enum="enum",r.interface="interface",r.struct="struct",r.typeParameter="typeParameter",r.parameter="parameter",r.variable="variable",r.property="property",r.enumMember="enumMember",r.event="event",r.function="function",r.method="method",r.macro="macro",r.keyword="keyword",r.modifier="modifier",r.comment="comment",r.string="string",r.number="number",r.regexp="regexp",r.operator="operator",(r=t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})).declaration="declaration",r.definition="definition",r.readonly="readonly",r.static="static",r.deprecated="deprecated",r.abstract="abstract",r.async="async",r.modification="modification",r.documentation="documentation",r.defaultLibrary="defaultLibrary",(t.SemanticTokens||(t.SemanticTokens={})).is=function(e){return void 0!==e&&(void 0===e.resultId||"string"==typeof e.resultId)&&Array.isArray(e.data)&&(0===e.data.length||"number"==typeof e.data[0])},(t.TokenFormat||(t.TokenFormat={})).Relative="relative",(r=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",r.type=new n.RegistrationType(r.method),(r=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",r.type=new n.ProtocolRequestType(r.method),(r=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",r.type=new n.ProtocolRequestType(r.method),(r=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",r.type=new n.ProtocolRequestType(r.method),(r=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",r.type=new n.ProtocolRequestType0(r.method)},5726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;n=n(6140);(t=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",t.type=new n.ProtocolRequestType(t.method)},1589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;n=n(6140);(t=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",t.type=new n.ProtocolRequestType(t.method)},9795:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;n=n(6140);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new n.ProtocolRequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new n.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")},9533:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every(e=>n(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},273:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(5028);i(n(5028),t),i(n(1661),t),t.createProtocolConnection=function(e,t,n,r){return o.createMessageConnection(e,t,n,r)}},6560:(e,t,n)=>{"use strict";e.exports=n(273)},6813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TextDocument:()=>r});Object.defineProperty(f.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),f.prototype.getText=function(e){var t;return e?(t=this.offsetAt(e.start),e=this.offsetAt(e.end),this._content.substring(t,e)):this._content},f.prototype.update=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(f.isIncremental(i)){var o=m(i.range),s=this.offsetAt(o.start),a=this.offsetAt(o.end),c=(this._content=this._content.substring(0,s)+i.text+this._content.substring(a,this._content.length),Math.max(o.start.line,0)),o=Math.max(o.end.line,0),u=this._lineOffsets,l=g(i.text,!1,s);if(o-c===l.length)for(var d=0,h=l.length;d<h;d++)u[d+c+1]=l[d];else l.length<1e4?u.splice.apply(u,[c+1,o-c].concat(l)):this._lineOffsets=u=u.slice(0,c+1).concat(l,u.slice(o+1));var p=i.text.length-(a-s);if(0!=p)for(d=c+1+l.length,h=u.length;d<h;d++)u[d]=u[d]+p}else{if(!f.isFull(i))throw new Error("Unknown change event received");this._content=i.text,this._lineOffsets=void 0}}this._version=t},f.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=g(this._content,!0)),this._lineOffsets},f.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return{line:o,character:e-t[o]}},f.prototype.offsetAt=function(e){var t,n=this.getLineOffsets();return e.line>=n.length?this._content.length:e.line<0?0:(t=n[e.line],n=e.line+1<n.length?n[e.line+1]:this._content.length,Math.max(Math.min(t+e.character,n),t))},Object.defineProperty(f.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),f.isIncremental=function(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)},f.isFull=function(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength};var r,i=f;function f(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}function g(e,t,n){void 0===n&&(n=0);for(var r=t?[n]:[],i=0;i<e.length;i++){var o=e.charCodeAt(i);13!==o&&10!==o||(13===o&&i+1<e.length&&10===e.charCodeAt(i+1)&&i++,r.push(n+i+1))}return r}function m(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function u(e){var t=m(e.range);return t!==e.range?{newText:e.newText,range:t}:e}(n=r=r||{}).create=function(e,t,n,r){return new i(e,t,n,r)},n.update=function(e,t,n){if(e instanceof i)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},n.applyEdits=function(e,t){for(var n=e.getText(),r=0,i=[],o=0,s=function e(t,n){if(!(t.length<=1)){var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++]}return t}(t.map(u),function(e,t){var n=e.range.start.line-t.range.start.line;return 0==n?e.range.start.character-t.range.start.character:n});o<s.length;o++){var a=s[o],c=e.offsetAt(a.range.start);if(c<r)throw new Error("Overlapping edit");r<c&&i.push(n.substring(r,c)),a.newText.length&&i.push(a.newText),r=e.offsetAt(a.range.end)}return i.push(n.substr(r)),i.join("")}},1674:(F,e,t)=>{"use strict";var n,r,s,i,o,a,c,u,l,d,h,p,L,I,A,f,g,m,y,v,b,R,w,_,P,T;t.r(e),t.d(e,{AnnotatedTextEdit:()=>b,ChangeAnnotation:()=>y,ChangeAnnotationIdentifier:()=>v,CodeAction:()=>ae,CodeActionContext:()=>se,CodeActionKind:()=>oe,CodeDescription:()=>A,CodeLens:()=>ce,Color:()=>c,ColorInformation:()=>u,ColorPresentation:()=>l,Command:()=>g,CompletionItem:()=>J,CompletionItemKind:()=>K,CompletionItemTag:()=>z,CompletionList:()=>G,CreateFile:()=>w,DeleteFile:()=>P,Diagnostic:()=>f,DiagnosticRelatedInformation:()=>p,DiagnosticSeverity:()=>L,DiagnosticTag:()=>I,DocumentHighlight:()=>ee,DocumentHighlightKind:()=>Q,DocumentLink:()=>le,DocumentSymbol:()=>ie,EOL:()=>ye,FoldingRange:()=>h,FoldingRangeKind:()=>d,FormattingOptions:()=>ue,Hover:()=>Z,InsertReplaceEdit:()=>B,InsertTextFormat:()=>U,InsertTextMode:()=>V,Location:()=>o,LocationLink:()=>a,MarkedString:()=>D,MarkupContent:()=>k,MarkupKind:()=>S,OptionalVersionedTextDocumentIdentifier:()=>C,ParameterInformation:()=>Y,Position:()=>s,Range:()=>i,RenameFile:()=>_,SelectionRange:()=>de,SignatureInformation:()=>X,SymbolInformation:()=>re,SymbolKind:()=>te,SymbolTag:()=>ne,TextDocument:()=>me,TextDocumentEdit:()=>R,TextDocumentIdentifier:()=>W,TextDocumentItem:()=>H,TextEdit:()=>m,VersionedTextDocumentIdentifier:()=>$,WorkspaceChange:()=>ge,WorkspaceEdit:()=>T,integer:()=>n,uinteger:()=>r}),(t=n=n||{}).MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647,(e=r=r||{}).MIN_VALUE=0,e.MAX_VALUE=2147483647,(t=s=s||{}).create=function(e,t){return{line:e=e===Number.MAX_VALUE?r.MAX_VALUE:e,character:t=t===Number.MAX_VALUE?r.MAX_VALUE:t}},t.is=function(e){return N.objectLiteral(e)&&N.uinteger(e.line)&&N.uinteger(e.character)},(e=i=i||{}).create=function(e,t,n,r){if(N.uinteger(e)&&N.uinteger(t)&&N.uinteger(n)&&N.uinteger(r))return{start:s.create(e,t),end:s.create(n,r)};if(s.is(e)&&s.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},e.is=function(e){return N.objectLiteral(e)&&s.is(e.start)&&s.is(e.end)},(t=o=o||{}).create=function(e,t){return{uri:e,range:t}},t.is=function(e){return N.defined(e)&&i.is(e.range)&&(N.string(e.uri)||N.undefined(e.uri))},(e=a=a||{}).create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){return N.defined(e)&&i.is(e.targetRange)&&N.string(e.targetUri)&&(i.is(e.targetSelectionRange)||N.undefined(e.targetSelectionRange))&&(i.is(e.originSelectionRange)||N.undefined(e.originSelectionRange))},(t=c=c||{}).create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},t.is=function(e){return N.numberRange(e.red,0,1)&&N.numberRange(e.green,0,1)&&N.numberRange(e.blue,0,1)&&N.numberRange(e.alpha,0,1)},(e=u=u||{}).create=function(e,t){return{range:e,color:t}},e.is=function(e){return i.is(e.range)&&c.is(e.color)},(t=l=l||{}).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},t.is=function(e){return N.string(e.label)&&(N.undefined(e.textEdit)||m.is(e))&&(N.undefined(e.additionalTextEdits)||N.typedArray(e.additionalTextEdits,m.is))},(e=d=d||{}).Comment="comment",e.Imports="imports",e.Region="region",(t=h=h||{}).create=function(e,t,n,r,i){e={startLine:e,endLine:t};return N.defined(n)&&(e.startCharacter=n),N.defined(r)&&(e.endCharacter=r),N.defined(i)&&(e.kind=i),e},t.is=function(e){return N.uinteger(e.startLine)&&N.uinteger(e.startLine)&&(N.undefined(e.startCharacter)||N.uinteger(e.startCharacter))&&(N.undefined(e.endCharacter)||N.uinteger(e.endCharacter))&&(N.undefined(e.kind)||N.string(e.kind))},(e=p=p||{}).create=function(e,t){return{location:e,message:t}},e.is=function(e){return N.defined(e)&&o.is(e.location)&&N.string(e.message)},(t=L=L||{}).Error=1,t.Warning=2,t.Information=3,t.Hint=4,(e=I=I||{}).Unnecessary=1,e.Deprecated=2,(A||(A={})).is=function(e){return null!=e&&N.string(e.href)},(t=f=f||{}).create=function(e,t,n,r,i,o){e={range:e,message:t};return N.defined(n)&&(e.severity=n),N.defined(r)&&(e.code=r),N.defined(i)&&(e.source=i),N.defined(o)&&(e.relatedInformation=o),e},t.is=function(e){var t;return N.defined(e)&&i.is(e.range)&&N.string(e.message)&&(N.number(e.severity)||N.undefined(e.severity))&&(N.integer(e.code)||N.string(e.code)||N.undefined(e.code))&&(N.undefined(e.codeDescription)||N.string(null==(t=e.codeDescription)?void 0:t.href))&&(N.string(e.source)||N.undefined(e.source))&&(N.undefined(e.relatedInformation)||N.typedArray(e.relatedInformation,p.is))},(e=g=g||{}).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e={title:e,command:t};return N.defined(n)&&0<n.length&&(e.arguments=n),e},e.is=function(e){return N.defined(e)&&N.string(e.title)&&N.string(e.command)},(t=m=m||{}).replace=function(e,t){return{range:e,newText:t}},t.insert=function(e,t){return{range:{start:e,end:e},newText:t}},t.del=function(e){return{range:e,newText:""}},t.is=function(e){return N.objectLiteral(e)&&N.string(e.newText)&&i.is(e.range)},(e=y=y||{}).create=function(e,t,n){e={label:e};return void 0!==t&&(e.needsConfirmation=t),void 0!==n&&(e.description=n),e},e.is=function(e){return void 0!==e&&N.objectLiteral(e)&&N.string(e.label)&&(N.boolean(e.needsConfirmation)||void 0===e.needsConfirmation)&&(N.string(e.description)||void 0===e.description)},(v||(v={})).is=function(e){return"string"==typeof e},(t=b=b||{}).replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},t.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},t.del=function(e,t){return{range:e,newText:"",annotationId:t}},t.is=function(e){return m.is(e)&&(y.is(e.annotationId)||v.is(e.annotationId))},(e=R=R||{}).create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){return N.defined(e)&&C.is(e.textDocument)&&Array.isArray(e.edits)},(t=w=w||{}).create=function(e,t,n){e={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(e.options=t),void 0!==n&&(e.annotationId=n),e},t.is=function(e){return e&&"create"===e.kind&&N.string(e.uri)&&(void 0===e.options||(void 0===e.options.overwrite||N.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||N.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||v.is(e.annotationId))},(e=_=_||{}).create=function(e,t,n,r){e={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(e.options=n),void 0!==r&&(e.annotationId=r),e},e.is=function(e){return e&&"rename"===e.kind&&N.string(e.oldUri)&&N.string(e.newUri)&&(void 0===e.options||(void 0===e.options.overwrite||N.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||N.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||v.is(e.annotationId))},(t=P=P||{}).create=function(e,t,n){e={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(e.options=t),void 0!==n&&(e.annotationId=n),e},t.is=function(e){return e&&"delete"===e.kind&&N.string(e.uri)&&(void 0===e.options||(void 0===e.options.recursive||N.boolean(e.options.recursive))&&(void 0===e.options.ignoreIfNotExists||N.boolean(e.options.ignoreIfNotExists)))&&(void 0===e.annotationId||v.is(e.annotationId))},(T||(T={})).is=function(e){return e&&(void 0!==e.changes||void 0!==e.documentChanges)&&(void 0===e.documentChanges||e.documentChanges.every(function(e){return N.string(e.kind)?w.is(e)||_.is(e)||P.is(e):R.is(e)}))};O.prototype.insert=function(e,t,n){var r,n=void 0===n?m.insert(e,t):v.is(n)?b.insert(e,t,r=n):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),b.insert(e,t,r));if(this.edits.push(n),void 0!==r)return r},O.prototype.replace=function(e,t,n){var r,n=void 0===n?m.replace(e,t):v.is(n)?b.replace(e,t,r=n):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),b.replace(e,t,r));if(this.edits.push(n),void 0!==r)return r},O.prototype.delete=function(e,t){var n,t=void 0===t?m.del(e):v.is(t)?b.del(e,n=t):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(t),b.del(e,n));if(this.edits.push(t),void 0!==n)return n},O.prototype.add=function(e){this.edits.push(e)},O.prototype.all=function(){return this.edits},O.prototype.clear=function(){this.edits.splice(0,this.edits.length)},O.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")};var W,$,C,H,S,k,K,U,z,B,V,J,G,D,Z,Y,X,Q,ee,te,ne,re,ie,oe,se,ae,ce,ue,le,de,he,pe,x=O,fe=(E.prototype.all=function(){return this._annotations},Object.defineProperty(E.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),E.prototype.manage=function(e,t){var n;if(v.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id "+n+" is already in use.");if(void 0===t)throw new Error("No annotation provided for id "+n);return this._annotations[n]=t,this._size++,n},E.prototype.nextId=function(){return this._counter++,this._counter.toString()},E),ge=(Object.defineProperty(q.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),q.prototype.getTextEditChange=function(e){if(C.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t,n={uri:e.uri,version:e.version};(r=this._textEditChanges[n.uri])||(t={textDocument:n,edits:i=[]},this._workspaceEdit.documentChanges.push(t),r=new x(i,this._changeAnnotations),this._textEditChanges[n.uri]=r)}else{if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r,i;(r=this._textEditChanges[e])||(this._workspaceEdit.changes[e]=i=[],r=new x(i),this._textEditChanges[e]=r)}return r},q.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new fe,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},q.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},q.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i;if(y.is(t)||v.is(t)?r=t:n=t,t=void 0===r?w.create(e,n):(i=v.is(r)?r:this._changeAnnotations.manage(r),w.create(e,n,i)),this._workspaceEdit.documentChanges.push(t),void 0!==i)return i},q.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o;if(y.is(n)||v.is(n)?i=n:r=n,n=void 0===i?_.create(e,t,r):(o=v.is(i)?i:this._changeAnnotations.manage(i),_.create(e,t,r,o)),this._workspaceEdit.documentChanges.push(n),void 0!==o)return o},q.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i;if(y.is(t)||v.is(t)?r=t:n=t,t=void 0===r?P.create(e,n):(i=v.is(r)?r:this._changeAnnotations.manage(r),P.create(e,n,i)),this._workspaceEdit.documentChanges.push(t),void 0!==i)return i},q);function q(n){var r=this;this._textEditChanges=Object.create(null),void 0!==n?(this._workspaceEdit=n).documentChanges?(this._changeAnnotations=new fe(n.changeAnnotations),n.changeAnnotations=this._changeAnnotations.all(),n.documentChanges.forEach(function(e){var t;R.is(e)&&(t=new x(e.edits,r._changeAnnotations),r._textEditChanges[e.textDocument.uri]=t)})):n.changes&&Object.keys(n.changes).forEach(function(e){var t=new x(n.changes[e]);r._textEditChanges[e]=t}):this._workspaceEdit={}}function E(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}function O(e,t){this.edits=e,this.changeAnnotations=t}(e=W=W||{}).create=function(e){return{uri:e}},e.is=function(e){return N.defined(e)&&N.string(e.uri)},(t=$=$||{}).create=function(e,t){return{uri:e,version:t}},t.is=function(e){return N.defined(e)&&N.string(e.uri)&&N.integer(e.version)},(e=C=C||{}).create=function(e,t){return{uri:e,version:t}},e.is=function(e){return N.defined(e)&&N.string(e.uri)&&(null===e.version||N.integer(e.version))},(t=H=H||{}).create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},t.is=function(e){return N.defined(e)&&N.string(e.uri)&&N.string(e.languageId)&&N.integer(e.version)&&N.string(e.text)},(e=S=S||{}).PlainText="plaintext",e.Markdown="markdown",(pe=S=S||{}).is=function(e){return e===pe.PlainText||e===pe.Markdown},(k||(k={})).is=function(e){var t=e;return N.objectLiteral(e)&&S.is(t.kind)&&N.string(t.value)},(t=K=K||{}).Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25,(e=U=U||{}).PlainText=1,e.Snippet=2,(z=z||{}).Deprecated=1,(t=B=B||{}).create=function(e,t,n){return{newText:e,insert:t,replace:n}},t.is=function(e){return e&&N.string(e.newText)&&i.is(e.insert)&&i.is(e.replace)},(e=V=V||{}).asIs=1,e.adjustIndentation=2,(J||(J={})).create=function(e){return{label:e}},(G||(G={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},(t=D=D||{}).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},t.is=function(e){return N.string(e)||N.objectLiteral(e)&&N.string(e.language)&&N.string(e.value)},(Z||(Z={})).is=function(e){var t=e;return!!t&&N.objectLiteral(t)&&(k.is(t.contents)||D.is(t.contents)||N.typedArray(t.contents,D.is))&&(void 0===e.range||i.is(e.range))},(Y||(Y={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(X||(X={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e={label:e};return N.defined(t)&&(e.documentation=t),N.defined(n)?e.parameters=n:e.parameters=[],e},(e=Q=Q||{}).Text=1,e.Read=2,e.Write=3,(ee||(ee={})).create=function(e,t){e={range:e};return N.number(t)&&(e.kind=t),e},(t=te=te||{}).File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26,(ne=ne||{}).Deprecated=1,(re||(re={})).create=function(e,t,n,r,i){e={name:e,kind:t,location:{uri:r,range:n}};return i&&(e.containerName=i),e},(e=ie=ie||{}).create=function(e,t,n,r,i,o){e={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(e.children=o),e},e.is=function(e){return e&&N.string(e.name)&&N.number(e.kind)&&i.is(e.range)&&i.is(e.selectionRange)&&(void 0===e.detail||N.string(e.detail))&&(void 0===e.deprecated||N.boolean(e.deprecated))&&(void 0===e.children||Array.isArray(e.children))&&(void 0===e.tags||Array.isArray(e.tags))},(t=oe=oe||{}).Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll",(e=se=se||{}).create=function(e,t){e={diagnostics:e};return null!=t&&(e.only=t),e},e.is=function(e){return N.defined(e)&&N.typedArray(e.diagnostics,f.is)&&(void 0===e.only||N.typedArray(e.only,N.string))},(t=ae=ae||{}).create=function(e,t,n){var e={title:e},r=!0;return"string"==typeof t?(r=!1,e.kind=t):g.is(t)?e.command=t:e.edit=t,r&&void 0!==n&&(e.kind=n),e},t.is=function(e){return e&&N.string(e.title)&&(void 0===e.diagnostics||N.typedArray(e.diagnostics,f.is))&&(void 0===e.kind||N.string(e.kind))&&(void 0!==e.edit||void 0!==e.command)&&(void 0===e.command||g.is(e.command))&&(void 0===e.isPreferred||N.boolean(e.isPreferred))&&(void 0===e.edit||T.is(e.edit))},(e=ce=ce||{}).create=function(e,t){e={range:e};return N.defined(t)&&(e.data=t),e},e.is=function(e){return N.defined(e)&&i.is(e.range)&&(N.undefined(e.command)||g.is(e.command))},(t=ue=ue||{}).create=function(e,t){return{tabSize:e,insertSpaces:t}},t.is=function(e){return N.defined(e)&&N.uinteger(e.tabSize)&&N.boolean(e.insertSpaces)},(e=le=le||{}).create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){return N.defined(e)&&i.is(e.range)&&(N.undefined(e.target)||N.string(e.target))},(he=de=de||{}).create=function(e,t){return{range:e,parent:t}},he.is=function(e){return void 0!==e&&i.is(e.range)&&(void 0===e.parent||he.is(e.parent))};var me,ye=["\n","\r\n","\r"];(t=me=me||{}).create=function(e,t,n,r){return new ve(e,t,n,r)},t.is=function(e){return!!(N.defined(e)&&N.string(e.uri)&&(N.undefined(e.languageId)||N.string(e.languageId))&&N.uinteger(e.lineCount)&&N.func(e.getText)&&N.func(e.positionAt)&&N.func(e.offsetAt))},t.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(!(t.length<=1)){var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++]}return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0==n?e.range.start.character-t.range.start.character:n}),i=n.length,o=r.length-1;0<=o;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n};Object.defineProperty(j.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),j.prototype.getText=function(e){var t;return e?(t=this.offsetAt(e.start),e=this.offsetAt(e.end),this._content.substring(t,e)):this._content},j.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},j.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r),n="\r"===i||"\n"===i;"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&0<t.length&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},j.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return s.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return s.create(o,e-t[o])},j.prototype.offsetAt=function(e){var t,n=this.getLineOffsets();return e.line>=n.length?this._content.length:e.line<0?0:(t=n[e.line],n=e.line+1<n.length?n[e.line+1]:this._content.length,Math.max(Math.min(t+e.character,n),t))},Object.defineProperty(j.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0});var N,M,ve=j;function j(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}e=N=N||{},M=Object.prototype.toString,e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===M.call(e)},e.number=function(e){return"[object Number]"===M.call(e)},e.numberRange=function(e,t,n){return"[object Number]"===M.call(e)&&t<=e&&e<=n},e.integer=function(e){return"[object Number]"===M.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===M.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===M.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}},6265:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.SemanticTokensBuilder=void 0;const o=n(9817);Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return o.SemanticTokensBuilder}}),i(n(273),t),i(n(9891),t),(t.ProposedFeatures||(t.ProposedFeatures={})).all={__brand:"features"}},7985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;const i=n(273);t.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:n=>{this.connection.onRequest(i.CallHierarchyPrepareRequest.type,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),void 0))},onIncomingCalls:n=>{const r=i.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(r,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),this.attachPartialResultProgress(r,e)))},onOutgoingCalls:n=>{const r=i.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(r,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),this.attachPartialResultProgress(r,e)))}}}}},2507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationFeature=void 0;const r=n(273),i=n(289);t.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?i.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(t){var e={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(r.ConfigurationRequest.type,e).then(e=>Array.isArray(t)?e:e[0])}}},828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileOperationsFeature=void 0;const r=n(273);t.FileOperationsFeature=e=>class extends e{onDidCreateFiles(t){this.connection.onNotification(r.DidCreateFilesNotification.type,e=>{t(e)})}onDidRenameFiles(t){this.connection.onNotification(r.DidRenameFilesNotification.type,e=>{t(e)})}onDidDeleteFiles(t){this.connection.onNotification(r.DidDeleteFilesNotification.type,e=>{t(e)})}onWillCreateFiles(n){return this.connection.onRequest(r.WillCreateFilesRequest.type,(e,t)=>n(e,t))}onWillRenameFiles(n){return this.connection.onRequest(r.WillRenameFilesRequest.type,(e,t)=>n(e,t))}onWillDeleteFiles(n){return this.connection.onRequest(r.WillDeleteFilesRequest.type,(e,t)=>n(e,t))}}},2776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeFeature=void 0;const r=n(273);t.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(n){this.connection.onRequest(r.LinkedEditingRangeRequest.type,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),void 0))}}},8120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerFeature=void 0;const i=n(273);t.MonikerFeature=e=>class extends e{get moniker(){return{on:n=>{const r=i.MonikerRequest.type;this.connection.onRequest(r,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),this.attachPartialResultProgress(r,e)))}}}}},2731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachPartialResult=t.ProgressFeature=t.attachWorkDone=void 0;const i=n(273),r=n(7560);class o{constructor(e,t){this._connection=e,this._token=t,o.Instances.set(this._token,this)}begin(e,t,n,r){e={kind:"begin",title:e,percentage:t,message:n,cancellable:r};this._connection.sendProgress(i.WorkDoneProgress.type,this._token,e)}report(e,t){var n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(i.WorkDoneProgress.type,this._token,n)}done(){o.Instances.delete(this._token),this._connection.sendProgress(i.WorkDoneProgress.type,this._token,{kind:"end"})}}o.Instances=new Map;class s extends o{constructor(e,t){super(e,t),this._source=new i.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class a{constructor(){}begin(){}report(){}done(){}}class c extends a{constructor(){super(),this._source=new i.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var u;t.attachWorkDone=function(e,t){var n;return void 0===t||void 0===t.workDoneToken?new a:(n=t.workDoneToken,delete t.workDoneToken,new o(e,n))},t.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){!0===(null==(e=null==e?void 0:e.window)?void 0:e.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(i.WorkDoneProgressCancelNotification.type,e=>{e=o.Instances.get(e.token);(e instanceof s||e instanceof c)&&e.cancel()}))}attachWorkDoneProgress(e){return void 0===e?new a:new o(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=r.generateUuid();return this.connection.sendRequest(i.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new s(this.connection,e))}return Promise.resolve(new c)}},(u=u||{}).type=new i.ProgressType;class l{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(u.type,this._token,e)}}t.attachPartialResult=function(e,t){var n;if(void 0!==t&&void 0!==t.partialResultToken)return n=t.partialResultToken,delete t.partialResultToken,new l(e,n)}},9817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensBuilder=t.SemanticTokensFeature=void 0;const i=n(273);t.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:n=>{const r=i.SemanticTokensRequest.type;this.connection.onRequest(r,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),this.attachPartialResultProgress(r,e)))},onDelta:n=>{const r=i.SemanticTokensDeltaRequest.type;this.connection.onRequest(r,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),this.attachPartialResultProgress(r,e)))},onRange:n=>{const r=i.SemanticTokensRangeRequest.type;this.connection.onRequest(r,(e,t)=>n(e,t,this.attachWorkDoneProgress(e),this.attachPartialResultProgress(r,e)))}}}},t.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let o=e,s=t;0<this._dataLen&&0===(o-=this._prevLine)&&(s-=this._prevChar),this._data[this._dataLen++]=o,this._data[this._dataLen++]=s,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0===this._prevData)return this.build();{var n=this._prevData.length,r=this._data.length;let t=0;for(;t<r&&t<n&&this._prevData[t]===this._data[t];)t++;if(t<r&&t<n){let e=0;for(;e<r&&e<n&&this._prevData[n-1-e]===this._data[r-1-e];)e++;var i=this._data.slice(t,r-e);return{resultId:this.id,edits:[{start:t,deleteCount:n-e-t,data:i}]}}return t<r?{resultId:this.id,edits:[{start:t,deleteCount:0,data:this._data.slice(t)}]}:t<n?{resultId:this.id,edits:[{start:t,deleteCount:n-t}]}:{resultId:this.id,edits:[]}}}}},9891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.combineFeatures=t.combineLanguagesFeatures=t.combineWorkspaceFeatures=t.combineWindowFeatures=t.combineClientFeatures=t.combineTracerFeatures=t.combineTelemetryFeatures=t.combineConsoleFeatures=t._LanguagesImpl=t.BulkUnregistration=t.BulkRegistration=t.ErrorMessageTracker=t.TextDocuments=void 0;const y=n(273),v=n(289),o=n(7560),b=n(2731),r=n(2507),i=n(8634),s=n(7985),a=n(9817),c=n(5421),u=n(828),l=n(2776),d=n(8120);function h(e){if(null!==e)return e}t.TextDocuments=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new y.Emitter,this._onDidOpen=new y.Emitter,this._onDidClose=new y.Emitter,this._onDidSave=new y.Emitter,this._onWillSave=new y.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=y.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{var e=e.textDocument,t=this._configuration.create(e.uri,e.languageId,e.version,e.text),e=(this._documents[e.uri]=t,Object.freeze({document:t}));this._onDidOpen.fire(e),this._onDidChangeContent.fire(e)}),e.onDidChangeTextDocument(e=>{var t=e.textDocument,e=e.contentChanges;if(0!==e.length){var n=this._documents[t.uri],r=t["version"];if(null==r)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);n=this._configuration.update(n,e,r),this._documents[t.uri]=n,this._onDidChangeContent.fire(Object.freeze({document:n}))}}),e.onDidCloseTextDocument(e=>{var t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{var t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{var n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{e=this._documents[e.textDocument.uri];e&&this._onDidSave.fire(Object.freeze({document:e}))})}},t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t=t||0,t++,this._messages[e]=t}sendErrors(t){Object.keys(this._messages).forEach(e=>{t.window.showErrorMessage(e)})}};class R{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}fillServerCapabilities(e){}initialize(e){}error(e){this.send(y.MessageType.Error,e)}warn(e){this.send(y.MessageType.Warning,e)}info(e){this.send(y.MessageType.Info,e)}log(e){this.send(y.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(y.LogMessageNotification.type,{type:e,message:t})}}const w=c.ShowDocumentFeature(b.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){e={type:y.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(y.ShowMessageRequest.type,e).then(h)}showWarningMessage(e,...t){e={type:y.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(y.ShowMessageRequest.type,e).then(h)}showInformationMessage(e,...t){e={type:y.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(y.ShowMessageRequest.type,e).then(h)}}));(t.BulkRegistration||(t.BulkRegistration={})).create=function(){return new p};class p{constructor(){this._registrations=[],this._registered=new Set}add(e,t){e=v.string(e)?e:e.method;if(this._registered.has(e))throw new Error(e+" is already added to this registration");var n=o.generateUuid();this._registrations.push({id:n,method:e,registerOptions:t||{}}),this._registered.add(e)}asRegistrationParams(){return{registrations:this._registrations}}}(t.BulkUnregistration||(t.BulkUnregistration={})).create=function(){return new f(void 0,[])};class f{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){var e,t=[];for(e of this._unregistrations.values())t.push(e);var n={unregisterations:t};this._connection.sendRequest(y.UnregistrationRequest.type,n).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=v.string(e)?e:e.method,n=this._unregistrations.get(t);return!!n&&(e={unregisterations:[n]},this._connection.sendRequest(y.UnregistrationRequest.type,e).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0)}}class _{attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof p?this.registerMany(e):e instanceof f?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(t,e,n){const r=v.string(e)?e:e.method,i=o.generateUuid();e={registrations:[{id:i,method:r,registerOptions:n||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(y.RegistrationRequest.type,e).then(e=>(t.add({id:i,method:r}),t),e=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(e)))}registerSingle2(e,t){const n=v.string(e)?e:e.method,r=o.generateUuid();e={registrations:[{id:r,method:n,registerOptions:t||{}}]};return this.connection.sendRequest(y.RegistrationRequest.type,e).then(e=>y.Disposable.create(()=>{this.unregisterSingle(r,n)}),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}unregisterSingle(t,e){e={unregisterations:[{id:t,method:e}]};return this.connection.sendRequest(y.UnregistrationRequest.type,e).then(void 0,e=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(y.RegistrationRequest.type,t).then(()=>new f(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const P=u.FileOperationsFeature(i.WorkspaceFoldersFeature(r.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}initialize(e){}fillServerCapabilities(e){}applyEdit(e){e=e&&e.edit?e:{edit:e};return this.connection.sendRequest(y.ApplyWorkspaceEditRequest.type,e)}})));class T{constructor(){this._trace=y.Trace.Off}attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==y.Trace.Off&&this.connection.sendNotification(y.LogTraceNotification.type,{message:e,verbose:this._trace===y.Trace.Verbose?t:void 0})}}class C{constructor(){}attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(y.TelemetryEventNotification.type,e)}}class g{constructor(){}attach(e){this._connection=e}get connection(){if(this._connection)return this._connection;throw new Error("Remote is not attached to a connection yet.")}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return b.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return b.attachPartialResult(this.connection,t)}}t._LanguagesImpl=g;const S=d.MonikerFeature(l.LinkedEditingRangeFeature(a.SemanticTokensFeature(s.CallHierarchyFeature(g))));function m(t,n){return function(e){return n(t(e))}}function k(t,n){return function(e){return n(t(e))}}function D(t,n){return function(e){return n(t(e))}}function x(t,n){return function(e){return n(t(e))}}function q(t,n){return function(e){return n(t(e))}}function E(t,n){return function(e){return n(t(e))}}t.combineConsoleFeatures=m,t.combineTelemetryFeatures=k,t.combineTracerFeatures=D,t.combineClientFeatures=x,t.combineWindowFeatures=q,t.combineWorkspaceFeatures=E,t.combineLanguagesFeatures=function(t,n){return function(e){return n(t(e))}},t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,m),tracer:n(e.tracer,t.tracer,D),telemetry:n(e.telemetry,t.telemetry,k),client:n(e.client,t.client,x),window:n(e.window,t.window,q),workspace:n(e.workspace,t.workspace,E)}},t.createConnection=function(e,o,t){const n=new(t&&t.console?t.console(R):R),s=e(n),a=(n.rawAttach(s),new(t&&t.tracer?t.tracer(T):T)),r=new(t&&t.telemetry?t.telemetry(C):C),i=new(t&&t.client?t.client(_):_),c=new(t&&t.window?t.window(w):w),u=new(t&&t.workspace?t.workspace(P):P),l=new(t&&t.languages?t.languages(S):S),d=[n,a,r,i,c,u,l];let h,p,f,g={listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(v.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(e,t),sendNotification:(e,t)=>{e=v.string(e)?e:e.method;1===arguments.length?s.sendNotification(e):s.sendNotification(e,t)},onNotification:(e,t)=>s.onNotification(e,t),onProgress:s.onProgress,sendProgress:s.sendProgress,onInitialize:e=>p=e,onInitialized:e=>s.onNotification(y.InitializedNotification.type,e),onShutdown:e=>h=e,onExit:e=>f=e,get console(){return n},get telemetry(){return r},get tracer(){return a},get client(){return i},get window(){return c},get workspace(){return u},get languages(){return l},onDidChangeConfiguration:e=>s.onNotification(y.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>s.onNotification(y.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>s.onNotification(y.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>s.onNotification(y.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>s.onNotification(y.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>s.onNotification(y.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>s.onRequest(y.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>s.onNotification(y.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>s.sendNotification(y.PublishDiagnosticsNotification.type,e),onHover:n=>s.onRequest(y.HoverRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),void 0)),onCompletion:n=>s.onRequest(y.CompletionRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onCompletionResolve:e=>s.onRequest(y.CompletionResolveRequest.type,e),onSignatureHelp:n=>s.onRequest(y.SignatureHelpRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),void 0)),onDeclaration:n=>s.onRequest(y.DeclarationRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onDefinition:n=>s.onRequest(y.DefinitionRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onTypeDefinition:n=>s.onRequest(y.TypeDefinitionRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onImplementation:n=>s.onRequest(y.ImplementationRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onReferences:n=>s.onRequest(y.ReferencesRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onDocumentHighlight:n=>s.onRequest(y.DocumentHighlightRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onDocumentSymbol:n=>s.onRequest(y.DocumentSymbolRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onWorkspaceSymbol:n=>s.onRequest(y.WorkspaceSymbolRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onCodeAction:n=>s.onRequest(y.CodeActionRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onCodeActionResolve:n=>s.onRequest(y.CodeActionResolveRequest.type,(e,t)=>n(e,t)),onCodeLens:n=>s.onRequest(y.CodeLensRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onCodeLensResolve:n=>s.onRequest(y.CodeLensResolveRequest.type,(e,t)=>n(e,t)),onDocumentFormatting:n=>s.onRequest(y.DocumentFormattingRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),void 0)),onDocumentRangeFormatting:n=>s.onRequest(y.DocumentRangeFormattingRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),void 0)),onDocumentOnTypeFormatting:n=>s.onRequest(y.DocumentOnTypeFormattingRequest.type,(e,t)=>n(e,t)),onRenameRequest:n=>s.onRequest(y.RenameRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),void 0)),onPrepareRename:n=>s.onRequest(y.PrepareRenameRequest.type,(e,t)=>n(e,t)),onDocumentLinks:n=>s.onRequest(y.DocumentLinkRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onDocumentLinkResolve:n=>s.onRequest(y.DocumentLinkResolveRequest.type,(e,t)=>n(e,t)),onDocumentColor:n=>s.onRequest(y.DocumentColorRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onColorPresentation:n=>s.onRequest(y.ColorPresentationRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onFoldingRanges:n=>s.onRequest(y.FoldingRangeRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onSelectionRanges:n=>s.onRequest(y.SelectionRangeRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),b.attachPartialResult(s,e))),onExecuteCommand:n=>s.onRequest(y.ExecuteCommandRequest.type,(e,t)=>n(e,t,b.attachWorkDone(s,e),void 0)),dispose:()=>s.dispose()};for(var m of d)m.attach(g);return s.onRequest(y.InitializeRequest.type,e=>{o.initialize(e),v.string(e.trace)&&(a.trace=y.Trace.fromString(e.trace));for(var t of d)t.initialize(e.capabilities);if(p)return((r=p(e,(new y.CancellationTokenSource).token,b.attachWorkDone(s,e),void 0))instanceof Promise?r:v.thenable(r)?new Promise((t,n)=>{r.then(e=>t(e),e=>n(e))}):Promise.resolve(r)).then(e=>{if(e instanceof y.ResponseError)return e;let t=e,n=(t=t||{capabilities:{}}).capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=v.number(g.__textDocumentSync)?g.__textDocumentSync:y.TextDocumentSyncKind.None:v.number(n.textDocumentSync)||v.number(n.textDocumentSync.change)||(n.textDocumentSync.change=v.number(g.__textDocumentSync)?g.__textDocumentSync:y.TextDocumentSyncKind.None);for(var r of d)r.fillServerCapabilities(n);return t});var r,n,i={capabilities:{textDocumentSync:y.TextDocumentSyncKind.None}};for(n of d)n.fillServerCapabilities(i.capabilities);return i}),s.onRequest(y.ShutdownRequest.type,()=>(o.shutdownReceived=!0,h?h((new y.CancellationTokenSource).token):void 0)),s.onNotification(y.ExitNotification.type,()=>{try{f&&f()}finally{o.shutdownReceived?o.exit(0):o.exit(1)}}),s.onNotification(y.SetTraceNotification.type,e=>{a.trace=y.Trace.fromString(e.value)}),g}},5421:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentFeature=void 0;const r=n(273);t.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(r.ShowDocumentRequest.type,e)}}},289:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>n(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},7560:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class r extends n{constructor(){super([r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-","4",r._randomHex(),r._randomHex(),r._randomHex(),"-",r._oneOf(r._timeHighBits),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return r._oneOf(r._chars)}}function i(){return new r}r._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],r._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(s(e))return new n(e);throw new Error("invalid uuid")},t.generateUuid=function(){return i().asHex()}},8634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=void 0;const r=n(273);t.WorkspaceFoldersFeature=e=>class extends e{initialize(e){e=e.workspace;e&&e.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new r.Emitter,this.connection.onNotification(r.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(this._onDidChangeWorkspaceFolders)return this._unregistration||(this._unregistration=this.connection.client.register(r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event;throw new Error("Client doesn't support sending workspace folder change events.")}}},7613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveModulePath=t.FileSystem=t.resolveGlobalYarnPath=t.resolveGlobalNodePath=t.resolve=t.uriToFilePath=void 0;const o=n(7310),d=n(1017),h=n(7147),p=n(2081);function c(){return"win32"===process.platform}function s(o,s,a,c){const u="NODE_PATH",l=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((n,r)=>{let t=process.env,i=Object.create(null);Object.keys(t).forEach(e=>i[e]=t[e]),s&&h.existsSync(s)&&(i[u]?i[u]=s+d.delimiter+i[u]:i[u]=s,c)&&c("NODE_PATH value is: "+i[u]),i.ELECTRON_RUN_AS_NODE="1";try{let t=p.fork("",[],{cwd:a,env:i,execArgv:["-e",l]});var e;void 0===t.pid?r(new Error(`Starting process to resolve node module  ${o} failed`)):(t.on("error",e=>{r(e)}),t.on("message",e=>{"r"===e.c&&(t.send({c:"e"}),e.s?n(e.r):r(new Error("Failed to resolve module: "+o)))}),e={c:"rs",a:o},t.send(e))}catch(e){r(e)}})}function a(e){let t="npm";const n=Object.create(null);Object.keys(process.env).forEach(e=>n[e]=process.env[e]),n.NO_UPDATE_NOTIFIER="true";var r={encoding:"utf8",env:n},i=(c()&&(t="npm.cmd",r.shell=!0),()=>{});try{process.on("SIGPIPE",i);var o,s=p.spawnSync(t,["config","get","prefix"],r).stdout;if(s)return o=s.trim(),e&&e("'npm config get prefix' value is: "+o),0<o.length?c()?d.join(o,"node_modules"):d.join(o,"lib","node_modules"):void 0;e&&e("'npm config get prefix' didn't return a value.")}catch(e){}finally{process.removeListener("SIGPIPE",i)}}var u;t.uriToFilePath=function(e){e=o.parse(e);if("file:"===e.protocol&&e.path){for(var t,n=e.path.split("/"),r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);return"win32"===process.platform&&1<n.length&&(e=n[0],t=n[1],0===e.length)&&1<t.length&&":"===t[1]&&n.shift(),d.normalize(n.join("/"))}},t.resolve=s,t.resolveGlobalNodePath=a,t.resolveGlobalYarnPath=function(e){let t="yarn",n={encoding:"utf8"};c()&&(t="yarn.cmd",n.shell=!0);var r=()=>{};try{process.on("SIGPIPE",r);var i,o=p.spawnSync(t,["global","dir","--json"],n),s=o.stdout;if(s)for(i of s.trim().split(/\r?\n/))try{var a=JSON.parse(i);if("log"===a.type)return d.join(a.data,"node_modules")}catch(e){}else e&&(e("'yarn global dir' didn't return a value."),o.stderr)&&e(o.stderr)}catch(e){}finally{process.removeListener("SIGPIPE",r)}};{n=u=t.FileSystem||(t.FileSystem={});let e;function r(){return e=void 0===e?!("win32"===process.platform||h.existsSync(__filename.toUpperCase())&&h.existsSync(__filename.toLowerCase())):e}n.isCaseSensitive=r,n.isParent=function(e,t){return r()?0===d.normalize(t).indexOf(d.normalize(e)):0===d.normalize(t).toLowerCase().indexOf(d.normalize(e).toLowerCase())}}t.resolveModulePath=function(t,n,r,i){return r?(d.isAbsolute(r)||(r=d.join(t,r)),s(n,r,r,i).then(e=>u.isParent(r,e)?e:Promise.reject(new Error(`Failed to load ${n} from node path location.`))).then(void 0,e=>s(n,a(i),t,i))):s(n,a(i),t,i)}},5809:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.Files=void 0;const p=n(289),f=n(9891),o=n(7613),g=n(6560);i(n(6560),t),i(n(6265),t),(i=t.Files||(t.Files={})).uriToFilePath=o.uriToFilePath,i.resolveGlobalNodePath=o.resolveGlobalNodePath,i.resolveGlobalYarnPath=o.resolveGlobalYarnPath,i.resolve=o.resolve,i.resolveModulePath=o.resolveModulePath;let s,m=!1;!function(){var t="--clientProcessId";function n(t){try{let e=parseInt(t);isNaN(e)||(s=setInterval(()=>{try{process.kill(e,0)}catch(e){process.exit(m?0:1)}},3e3))}catch(t){}}for(let e=2;e<process.argv.length;e++){var r=process.argv[e];if(r===t&&e+1<process.argv.length)return n(process.argv[e+1]);r=r.split("=");r[0]===t&&n(r[1])}}();const y={initialize:e=>{const t=e.processId;p.number(t)&&void 0===s&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(m?0:1)}},3e3)},get shutdownReceived(){return m},set shutdownReceived(e){m=e},exit:e=>{process.exit(e)}};t.createConnection=function(e,t,n,r){let i,o,s,a;void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=r),a=g.ConnectionStrategy.is(e)||g.ConnectionOptions.is(e)?e:(o=e,s=t,n);var c=o,u=s,l=a,r=i;if(!c&&!u&&2<process.argv.length){let t,n,r=process.argv.slice(2);for(let e=0;e<r.length;e++){var d=r[e];if("--node-ipc"===d){c=new g.IPCMessageReader(process),u=new g.IPCMessageWriter(process);break}if("--stdio"===d){c=process.stdin,u=process.stdout;break}if("--socket"===d){t=parseInt(r[e+1]);break}if("--pipe"===d){n=r[e+1];break}d=d.split("=");if("--socket"===d[0]){t=parseInt(d[1]);break}if("--pipe"===d[0]){n=d[1];break}}t?(h=g.createServerSocketTransport(t),c=h[0],u=h[1]):n&&(h=g.createServerPipeTransport(n),c=h[0],u=h[1])}var h="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!c)throw new Error("Connection input stream is not set. "+h);if(u)return p.func(c.read)&&p.func(c.on)&&((e=c).on("end",()=>{process.exit(m?0:1)}),e.on("close",()=>{process.exit(m?0:1)})),f.createConnection(e=>g.createProtocolConnection(c,u,e,l),y,r);throw new Error("Connection output stream is not set. "+h)}},8212:(e,t,n)=>{"use strict";e.exports=n(5809)},7373:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d,setUriThrowOnMissingScheme:()=>function(e){var t=u;return u=e,t}});n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])});"object"==typeof process?r="win32"===process.platform:"object"==typeof navigator&&(r=0<=navigator.userAgent.indexOf("Windows"));var r,s=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//,u=!0;var l="/",i=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=(o.isUri=function(e){return e instanceof o||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"function"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString},Object.defineProperty(o.prototype,"fsPath",{get:function(){return w(this)},enumerable:!0,configurable:!0}),o.prototype.with=function(e){var t,n,r,i;return!e||(t=e.scheme,n=e.authority,r=e.path,i=e.query,e=e.fragment,void 0===t?t=this.scheme:null===t&&(t=""),void 0===n?n=this.authority:null===n&&(n=""),void 0===r?r=this.path:null===r&&(r=""),void 0===i?i=this.query:null===i&&(i=""),void 0===e?e=this.fragment:null===e&&(e=""),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&e===this.fragment)?this:new g(t,n,r,i,e)},o.parse=function(e,t){void 0===t&&(t=!1);e=i.exec(e);return e?new g(e[2]||"",decodeURIComponent(e[4]||""),decodeURIComponent(e[5]||""),decodeURIComponent(e[7]||""),decodeURIComponent(e[9]||""),t):new g("","","","","")},o.file=function(e){var t,n="";return(e=r?e.replace(/\\/g,l):e)[0]===l&&e[1]===l&&(e=-1===(t=e.indexOf(l,2))?(n=e.substring(2),l):(n=e.substring(2,t),e.substring(t)||l)),new g("file",n,e,"","")},o.from=function(e){return new g(e.scheme,e.authority,e.path,e.query,e.fragment)},o.prototype.toString=function(e){return _(this,e=void 0===e?!1:e)},o.prototype.toJSON=function(){return this},o.revive=function(e){var t;return e&&(e instanceof o?e:((t=new g(e))._formatted=e.external,t._fsPath=e._sep===f?e.fsPath:null,t))},o);function o(e,t,n,r,i,o){if(void 0===o&&(o=!1),"object"==typeof e)this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||"";else{this.scheme=o||u?e||"":e||"file",this.authority=t||"",this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==l&&(t=l+t):t=l}return t}(this.scheme,n||""),this.query=r||"",this.fragment=i||"";e=this,t=o;if(!e.scheme&&(t||u))throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!s.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!a.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const d=t;var h,p,f=r?1:void 0,g=(n(p=y,n=h=t),p.prototype=null===n?Object.create(n):(v.prototype=n.prototype,new v),Object.defineProperty(y.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=w(this)),this._fsPath},enumerable:!0,configurable:!0}),y.prototype.toString=function(e){return(e=void 0===e?!1:e)?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)},y.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=f),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},y),m=((t={})[58]="%3A",t[47]="%2F",t[63]="%3F",t[35]="%23",t[91]="%5B",t[93]="%5D",t[64]="%40",t[33]="%21",t[36]="%24",t[38]="%26",t[39]="%27",t[40]="%28",t[41]="%29",t[42]="%2A",t[43]="%2B",t[44]="%2C",t[59]="%3B",t[61]="%3D",t[32]="%20",t);function y(){var e=null!==h&&h.apply(this,arguments)||this;return e._formatted=null,e._fsPath=null,e}function v(){this.constructor=p}function b(e,t){for(var n=void 0,r=-1,i=0;i<e.length;i++){var o=e.charCodeAt(i);97<=o&&o<=122||65<=o&&o<=90||48<=o&&o<=57||45===o||46===o||95===o||126===o||t&&47===o?(-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),void 0!==n&&(n+=e.charAt(i))):(void 0===n&&(n=e.substr(0,i)),void 0!==(o=m[o])?(-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=o):-1===r&&(r=i))}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function R(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=m[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function w(e){e=e.authority&&1<e.path.length&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(65<=e.path.charCodeAt(1)&&e.path.charCodeAt(1)<=90||97<=e.path.charCodeAt(1)&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path;return e=r?e.replace(/\//g,"\\"):e}function _(e,t){var n,r,i=t?R:b,o="",s=e.scheme,a=e.authority,c=e.path,u=e.query,e=e.fragment;return s&&(o=o+s+":"),!a&&"file"!==s||(o=o+l+l),a&&(-1!==(s=a.indexOf("@"))&&(n=a.substr(0,s),a=a.substr(s+1),-1===(s=n.indexOf(":"))?o+=i(n,!1):o=(o=o+i(n.substr(0,s),!1)+":")+i(n.substr(s+1),!1),o+="@"),-1===(s=(a=a.toLowerCase()).indexOf(":"))?o+=i(a,!1):o=(o+=i(a.substr(0,s),!1))+a.substr(s)),c&&(3<=c.length&&47===c.charCodeAt(0)&&58===c.charCodeAt(2)?65<=(r=c.charCodeAt(1))&&r<=90&&(c="/"+String.fromCharCode(r+32)+":"+c.substr(3)):2<=c.length&&58===c.charCodeAt(1)&&65<=(r=c.charCodeAt(0))&&r<=90&&(c=String.fromCharCode(r+32)+":"+c.substr(2)),o+=i(c,!0)),u&&(o=(o+="?")+i(u,!1)),o=e?(o+="#")+(t?e:b(e,!1)):o}},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,n)=>{"use strict";function o(e){var t=this;if((t=t instanceof o?t:new o).tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(0<arguments.length)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function u(e,t,n,r){if(!(this instanceof u))return new u(e,t,n,r);this.list=r,this.value=e,t?(t.next=this).prev=t:this.prev=null,n?(n.prev=this).next=n:this.next=null}(e.exports=o).Node=u,(o.create=o).prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},o.prototype.unshiftNode=function(e){var t;e!==this.head&&(e.list&&e.list.removeNode(e),t=this.head,e.list=this,(e.next=t)&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++)},o.prototype.pushNode=function(e){var t;e!==this.tail&&(e.list&&e.list.removeNode(e),t=this.tail,e.list=this,(e.prev=t)&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++)},o.prototype.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)e=this,t=arguments[n],e.tail=new u(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++;return this.length},o.prototype.unshift=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)e=this,t=arguments[n],e.head=new u(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++;return this.length},o.prototype.pop=function(){var e;if(this.tail)return e=this.tail.value,this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e},o.prototype.shift=function(){var e;if(this.head)return e=this.head.value,this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e},o.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},o.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},o.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},o.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},o.prototype.map=function(e,t){t=t||this;for(var n=new o,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},o.prototype.mapReverse=function(e,t){t=t||this;for(var n=new o,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},o.prototype.reduce=function(e,t){var n,r=this.head;if(1<arguments.length)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},o.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(1<arguments.length)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},o.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},o.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},o.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new o;if(!(t<e||t<0)){e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value)}return n},o.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new o;if(!(t<e||t<0)){e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&t<r;r--)i=i.prev;for(;null!==i&&e<r;r--,i=i.prev)n.push(i.value)}return n},o.prototype.splice=function(e,t,...n){(e=e>this.length?this.length-1:e)<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(var o,s,a,c=[],r=0;i&&r<t;r++)c.push(i.value),i=this.removeNode(i);for((i=null===i?this.tail:i)!==this.head&&i!==this.tail&&(i=i.prev),r=0;r<n.length;r++)s=i,a=n[r],null===(a=s===(o=this).head?new u(a,null,s,o):new u(a,s,s.next,o)).next&&(o.tail=a),null===a.prev&&(o.head=a),o.length++,i=a;return c},o.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(9602)(o)}catch(e){}},3775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupTemporaryAssetPath=t.getPerlAssetsPath=t.getAssetsPath=void 0,n(7282);const r=n(2037),i=n(7147),o=n(1017);let s,a=!1;function c(){return process.pkg?(a||(s=(0,i.mkdtempSync)((0,o.join)((0,r.tmpdir)(),"perl-navigator")),["src/perl/Inquisitor.pm","src/perl/lib_bs22/Class/Inspector.pm","src/perl/lib_bs22/Devel/Symdump.pm","src/perl/lib_bs22/Devel/Symdump/Export.pm","src/perl/lib_bs22/Inspectorito.pm","src/perl/lib_bs22/ModHunter.pl","src/perl/lib_bs22/SubUtilPP.pm","src/perl/lib_bs22/SourceStash.pm","src/perl/lib_bs22/pltags.pm","src/perl/Inquisitor.pm","src/perl/criticWrapper.pl","src/perl/defaultCriticProfile","src/perl/tidyWrapper.pl"].forEach(e=>{var t=(0,o.join)((0,o.dirname)(__dirname),e),e=(0,o.join)(s,e);(0,i.mkdirSync)((0,o.dirname)(e),{recursive:!0}),(0,i.createReadStream)(t).pipe((0,i.createWriteStream)(e))}),a=!0),s):(0,o.dirname)(__dirname)}t.getAssetsPath=c,t.getPerlAssetsPath=function(){return(0,o.join)(c(),"src","perl")},t.cleanupTemporaryAssetPath=function(){a&&((0,i.rmdirSync)(s,{recursive:!0}),a=!1)}},5347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCompletions=void 0;const f=n(8212),g=n(4042);t.getCompletions=function(e,t,n,r){var r=Array.from(r.keys()),i=e.position,e={line:i.line,character:0},o={line:i.line+1,character:0},o=n.getText({start:e,end:o}),s=n.offsetAt(i)-n.offsetAt(e),n=function(e,t){e=e.substring(0,t);var e=/^\s*(?:use|require)\s+([\w:]+)$/.exec(e);if(e)return{symbol:e=e[1],charStart:t-e.length,charEnd:t}}(o,s);if(n){const e={start:{line:i.line,character:n.charStart},end:{line:i.line,character:n.charEnd}},t=function(e,t,n){const r=[],i=t.toLowerCase();return e.forEach(e=>{e.toLowerCase().startsWith(i)&&r.push({label:e,textEdit:{newText:e,range:n},kind:f.CompletionItemKind.Module})}),r}(r,n.symbol,e);return t}{const e=function(e,t){let n=t-1;for(;0<=n&&(r=e[n],/[\w\:\>\-]/.exec(r));)--n;var r;n=Math.max(0,n+1);let i=e.substring(n,t);var o=0<n?e[n-1]:"";return"$"!==o&&"@"!==o&&"%"!==o||(i=o+i,--n),{symbol:i,charStart:n,charEnd:t}}(o,s);if(!e.symbol)return[];const n={start:{line:i.line,character:e.charStart},end:{line:i.line,character:e.charEnd}},r=function(a,c,u){let l=[],d=c.replace(/->/g,"::"),h=(d=d.replace(/-$/g,":"),!1),e=/^(\$\w+):(?::\w*)?$/.exec(d);if(e){const c=a.canonicalElems.get(e[1]);c&&(d=d.replace(/^\$\w+(?=:)/,c.type),h=!0)}const p=/^(\$self):(?::\w*)?$/.exec(d);return p&&(h=!0),a.elems.forEach((t,n)=>{if(!/^[\$\@\%].$/.test(n)){var e,r,i,o,s,t=a.canonicalElems.get(n)||t[0];if(p&&["s","i","o","f"].includes(t.type)&&(n="$self::"+n),e=a,r=n,i=d,o=c,s=h,r.startsWith(i)&&!/(?:::|->)[A-Z][A-Z_]+$/.test(r)&&(s?!(/(?:::|->)(?:new|import)$/.test(r)||/^(?!\$self)\$/.test(o)&&/(?:::|->)__\w+$/.test(r)):!(i=/^(.+)::.*?$/.exec(r))||e.imported.has(i[1]))){const a=d.replace(/([\$])/g,"\\$1");let e=n.replace(new RegExp("^"+a,"gi"),c);c.endsWith("-")&&(e=e.replace(new RegExp("-:","gi"),"->")),/\-\>\w+::/.test(e)||/\-\>\w+$/.test(e)&&!["s","t","i","o","x","f","d"].includes(t.type)||!/^\$.*\-\>\w+$/.test(e)&&["o","x","f","d"].includes(t.type)||/-:/.test(e)||/^\$.*::/.test(e)||(l=l.concat(function(e,t,n){let r,i,o,s=[];if(1<t.type.length||["v","c"].includes(t.type)&&"$self"==e)r=f.CompletionItemKind.Variable,1<t.type.length?i=e+": "+t.type:"$self"==e&&(i=e+": "+t.package);else if(t.type==g.PerlSymbolKind.LocalVar)r=f.CompletionItemKind.Variable;else if(t.type==g.PerlSymbolKind.ImportedVar)r=f.CompletionItemKind.Constant,s.push(t.name),s.push("Value: "+t.value);else if(t.type==g.PerlSymbolKind.ImportedHash||t.type==g.PerlSymbolKind.Constant)r=f.CompletionItemKind.Constant;else if(t.type==g.PerlSymbolKind.LocalSub)/^\$self\-/.test(e)&&s.push(t.name),r=f.CompletionItemKind.Function;else if(t.type==g.PerlSymbolKind.ImportedSub||t.type==g.PerlSymbolKind.Inherited||t.type==g.PerlSymbolKind.Method||t.type==g.PerlSymbolKind.LocalMethod)r=f.CompletionItemKind.Method,s.push(t.name),t.typeDetail&&t.typeDetail!=t.name&&s.push(`
Defined as:
  `+t.typeDetail);else if(t.type==g.PerlSymbolKind.Package||t.type==g.PerlSymbolKind.Module)r=f.CompletionItemKind.Module;else if(t.type==g.PerlSymbolKind.Label)r=f.CompletionItemKind.Reference;else if(t.type==g.PerlSymbolKind.Class)r=f.CompletionItemKind.Class;else if(t.type==g.PerlSymbolKind.Role)r=f.CompletionItemKind.Interface;else if(t.type==g.PerlSymbolKind.Field||t.type==g.PerlSymbolKind.PathedField)r=f.CompletionItemKind.Field;else{if(t.type==g.PerlSymbolKind.Phaser)return[];r=f.CompletionItemKind.Property}0<s.length&&(o={kind:"markdown",value:"```\n"+s.join("\n")+"\n```"});t=[e];/::new$/.test(e)&&t.push(e.replace(/::new$/,"->new"));let a=[];return t.forEach(e=>{a.push({label:e,textEdit:{newText:e,range:n},kind:r,sortText:function(e){let t;return/^[@\$%]?[a-z]?[a-z]?[A-Z][A-Z_]*$/.test(e)||/(?:::|->)[A-Z][A-Z_]+$/.test(e)?t="4"+e:/^_$/.test(e)||/(?:::|->)_\w+$/.test(e)?t="3"+e:/^\w$/.test(e)||/(?:::|->)\w+$/.test(e)?(t="2",/->new/.test(e)&&(t+="1"),t+=e):t="1"+e,t}(e),detail:i,documentation:o})}),a}(e,t,u)))}}}),l}(t,e.symbol,n);return r}}},4540:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.perlimports=t.perlcritic=t.perlcompile=void 0;const y=n(8212),p=n(1017),v=n(7373),b=n(1878),R=n(7994),w=n(3775);t.perlcompile=async function(e,t,n){var r,i,o,s,a,c;let u=["-c"];const l=v.default.parse(e.uri).fsPath;let d,h,p;u=(u=(u=n.enableWarnings?u.concat(["-Mwarnings","-M-warnings=redefine"]):u).concat((0,b.getIncPaths)(t,n))).concat(["-I",(0,w.getPerlAssetsPath)(),"-MInquisitor"]),(0,b.nLog)("Starting perl compilation check with the equivalent of: "+n.perlPath+" "+u.join(" ")+" "+l,n);const f=[],g=function(e,t){let n=e.getText();var r=/^\s*package[\s\n]+([A-Z_a-z][0-9A-Z_a-z]*(?:::[0-9A-Z_a-z]+)*)/gm;let i="",o=r.exec(n);for(;null!=o;){const e=o[1].replace(/::/g,"/")+".pm";if(t.match(".*"+e)){i=`$INC{'${e}'} = '${t}';`;break}o=r.exec(n)}return n=`local $0; use lib_bs22::SourceStash; BEGIN { $0 = '${t}'; if ($INC{'FindBin.pm'}) { FindBin->again(); }; $lib_bs22::SourceStash::filename = '${t}'; print "Setting file" . __FILE__; ${i} }
# line 0 "${t}"
die('Not needed, but die for safety');
`+n}(e,l);try{const e=(0,b.async_execFile)(n.perlPath,u,{timeout:1e4,maxBuffer:20971520}),t=(null!=(i=null==(r=null==e?void 0:e.child)?void 0:r.stdin)&&i.on("error",e=>{(0,b.nLog)("Perl Compilation Error Caught: ",n),(0,b.nLog)(e,n)}),null!=(s=null==(o=null==e?void 0:e.child)?void 0:o.stdin)&&s.write(g),null!=(c=null==(a=null==e?void 0:e.child)?void 0:a.stdin)&&c.end(),await e);d=t.stderr,h=t.stdout,p=y.DiagnosticSeverity.Warning}catch(e){if(!("stderr"in e&&"stdout"in e))return(0,b.nLog)("Perlcompile failed with unknown error",n),void(0,b.nLog)(e,n);d=e.stderr,h=e.stdout,p=y.DiagnosticSeverity.Error}const m=await(0,R.buildNav)(h,l,e.uri);return d.split("\n").forEach(e=>{var t=p,n=f,r=l,i=m;void 0!==(r=function(r,e,i){if(!/Too late to run CHECK block/.test(r)){let t=/^(.+)at\s+(.+?)\s+line\s+(\d+)/i.exec(r);if(t){if(t[2]==e)return{violation:r=t[1],lineNum:+t[3]-1};{let n=0;const o=t[2].replace(".pm","").replace(/[\\\/]/g,"::");return i.imported.forEach((e,t)=>{o.endsWith(t)&&(n=e)}),{violation:r,lineNum:n}}}if(t=/\s+is not exported by the ([\w:]+) module$/i.exec(r)){let e=i.imported.get(t[2]);return{violation:r,lineNum:e=void 0===e?0:e}}}}(e=(e=e.replace(/\r/g,"")).replace(/, <STDIN> line 1\.$/g,""),r,i))&&(i=r.lineNum,e=r.violation,/=PerlWarning=/.test(e)&&(t=y.DiagnosticSeverity.Warning,e=e.replace(/=PerlWarning=/g,"")),n.push({severity:t,range:{start:{line:i,character:0},end:{line:i,character:500}},message:"Syntax: "+e,source:"perlnavigator"}))}),{diags:f,perlDoc:m}},t.perlcritic=async function(e,t,s){var n,r,i,o,a,c;if(!s.perlcriticEnabled)return[];let u=[(0,p.join)((0,w.getPerlAssetsPath)(),"criticWrapper.pl")].concat(function(e,t){var n=[];if(t.perlcriticProfile){var r=t.perlcriticProfile;if(/\$workspaceFolder/.test(r))if(e){const t=v.default.parse(e[0].uri).fsPath;n.push("--profile"),n.push(r.replace(/\$workspaceFolder/g,t))}else(0,b.nLog)("You specified $workspaceFolder in your perlcritic path, but didn't include any workspace folders. Ignoring profile.",t);else n.push("--profile"),n.push(r)}return n}(t,s));u=u.concat(["--file",v.default.parse(e.uri).fsPath]),s.perlcriticSeverity&&(u=u.concat(["--severity",s.perlcriticSeverity.toString()])),s.perlcriticTheme&&(u=u.concat(["--theme",s.perlcriticTheme])),s.perlcriticExclude&&(u=u.concat(["--exclude",s.perlcriticExclude])),s.perlcriticInclude&&(u=u.concat(["--include",s.perlcriticInclude])),(0,b.nLog)("Now starting perlcritic with: "+u.join(" "),s);const l=e.getText(),d=[];let h;try{const e=(0,b.async_execFile)(s.perlPath,u,{timeout:25e3});null!=(r=null==(n=null==e?void 0:e.child)?void 0:n.stdin)&&r.on("error",e=>{(0,b.nLog)("Perl Critic Error Caught: ",s),(0,b.nLog)(e,s)}),null!=(o=null==(i=null==e?void 0:e.child)?void 0:i.stdin)&&o.write(l),null!=(c=null==(a=null==e?void 0:e.child)?void 0:a.stdin)&&c.end(),h=(await e).stdout}catch(e){return(0,b.nLog)("Perlcritic failed with unknown error",s),(0,b.nLog)(e,s),d}return(0,b.nLog)("Critic output: "+h,s),h.split("\n").forEach(e=>{var t,n,r,i,o;e=e,t=d,n=s,5==(e=e.replace("~||~","").replace(/\r/g,"").split("~|~")).length&&(r=+e[1]-1,i=+e[2]-1,o=e[3]+" ("+e[4]+", Severity: "+e[0]+")",e=function(e){switch("1"==e?n.severity1:"2"==e?n.severity2:"3"==e?n.severity3:"4"==e?n.severity4:n.severity5){case"none":return;case"hint":return y.DiagnosticSeverity.Hint;case"info":return y.DiagnosticSeverity.Information;case"warning":return y.DiagnosticSeverity.Warning;default:return y.DiagnosticSeverity.Error}}(e[0]))&&t.push({severity:e,range:{start:{line:r,character:i},end:{line:r,character:500+i}},message:"Critic: "+o,source:"perlnavigator"})}),d},t.perlimports=async function(e,t,i){var n,r,o,s,a,c;if(!i.perlimportsLintEnabled)return[];var u=[(0,p.join)((0,w.getPerlAssetsPath)(),"perlimportsWrapper.pl"),...(0,b.getPerlimportsProfile)(i),"--lint","--json","--filename",v.default.parse(e.uri).fsPath];(0,b.nLog)("Now starting perlimports with: "+u.join(" "),i);const l=e.getText(),d=[];let h;try{const e=(0,b.async_execFile)(i.perlPath,u,{timeout:25e3});null!=(r=null==(n=null==e?void 0:e.child)?void 0:n.stdin)&&r.on("error",e=>{(0,b.nLog)("perlimports Error Caught: "+e,i)}),null!=(s=null==(o=null==e?void 0:e.child)?void 0:o.stdin)&&s.write(l),null!=(c=null==(a=null==e?void 0:e.child)?void 0:a.stdin)&&c.end(),h=(await e).stdout}catch(e){(0,b.nLog)("Attempted to run perlimports lint: "+e.stdout,i),h=e.message}return h.split("\n").filter(e=>e.startsWith("{")).forEach(e=>{var t=e,e=d,n=i;try{const n=JSON.parse(t),r=n.location;e.push({message:`perlimports: ${n.reason} 

 `+n.diff,range:{start:{line:Number(r.start.line)-1,character:Number(r.start.column)-1},end:{line:Number(r.end.line)-1,character:Number(r.end.column)-1}},severity:y.DiagnosticSeverity.Warning,source:"perlnavigator"})}catch(t){(0,b.nLog)("Could not parse JSON violation "+t,n)}}),d}},8254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRange=t.formatDoc=void 0;const s=n(8212),d=n(1878),h=n(1017),p=n(7373),f=n(3775),c=n(4221);async function a(t,n,r,i,o){var s=n.getText(t);if(s){var a=await(0,c.startProgress)(o,"Formatting doc",r);let e="";n=await async function(t,n,r){var i,o,s,a,c,u;if(r.perlimportsTidyEnabled){let e=[(0,h.join)((0,f.getPerlAssetsPath)(),"perlimportsWrapper.pl")].concat((0,d.getPerlimportsProfile)(r));e=e.concat(["--filename",p.default.parse(t.uri).fsPath]),(0,d.nLog)("Now starting perlimports with: "+e.join(" "),r);try{const t=(0,d.async_execFile)(r.perlPath,e,{timeout:25e3,maxBuffer:20971520});return null!=(o=null==(i=null==t?void 0:t.child)?void 0:i.stdin)&&o.on("error",e=>{(0,d.nLog)("perlImports Error Caught: ",r),(0,d.nLog)(e,r)}),null!=(a=null==(s=null==t?void 0:t.child)?void 0:s.stdin)&&a.write(n),null!=(u=null==(c=null==t?void 0:t.child)?void 0:c.stdin)&&u.end(),(await t).stdout}catch(t){(0,d.nLog)("Attempted to run perlimports tidy "+t.stdout,r)}}}(n,s,r),n=(n&&(e=n),await async function(n,r,i){var o,s,a,c,u,l;if(r.perltidyEnabled){let e,t=[(0,h.join)((0,f.getPerlAssetsPath)(),"tidyWrapper.pl")].concat(function(e,t){var n=[];if(t.perltidyProfile){var r=t.perltidyProfile;if(/\$workspaceFolder/.test(r))if(e){const t=p.default.parse(e[0].uri).fsPath;n.push("--profile"),n.push(r.replace(/\$workspaceFolder/g,t))}else(0,d.nLog)("You specified $workspaceFolder in your perltidy path, but didn't include any workspace folders. Ignoring profile.",t);else n.push("--profile"),n.push(r)}return n}(i,r));(0,d.nLog)("Now starting perltidy with: "+t.join(" "),r);try{const i=(0,d.async_execFile)(r.perlPath,t,{timeout:25e3,maxBuffer:20971520});null!=(s=null==(o=null==i?void 0:i.child)?void 0:o.stdin)&&s.on("error",e=>{(0,d.nLog)("PerlTidy Error Caught: ",r),(0,d.nLog)(e,r)}),null!=(c=null==(a=null==i?void 0:i.child)?void 0:a.stdin)&&c.write(n),null!=(l=null==(u=null==i?void 0:i.child)?void 0:u.stdin)&&l.end(),e=(await i).stdout}catch(n){return(0,d.nLog)("Perltidy failed with unknown error",r),void(0,d.nLog)(n,r)}i=e.split("ee4ffa34-a14f-4609-b2e4-bf23565f3262");return 1<i.length?i[1]:void 0}}(n||s,r,i));return n&&(e=n),(0,c.endProgress)(o,a),e?[{range:t,newText:e}]:void 0}}t.formatDoc=async function(e,t,n,r,i){return a(s.Range.create(s.Position.create(0,0),s.Position.create(t.lineCount,0)),t,n,r,i)},t.formatRange=async function(e,t,n,r,i){var o=0<e.range.end.character?1:0;return a(s.Range.create(s.Position.create(e.range.start.line,0),s.Position.create(e.range.end.line+o,0)),t,n,r,i)}},1400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHover=void 0;const s=n(1878);t.getHover=function(e,t,n,r){var i=e.position,n=(0,s.getSymbol)(i,n);let o=t.canonicalElems.get(n);if(!o){const e=(0,s.lookupSymbol)(t,r,n,i.line);if(1!=e.length)return;o=e[0]}e=function(e,t){let n="";return 1<t.type.length||["v","c"].includes(t.type)&&/^\$self/.test(e)?(n="(object) ",1<t.type.length?n+=""+t.type:/^\$self/.test(e)&&(n+=""+t.package)):"v"!=t.type&&("n"==t.type?n="(constant) "+e:"c"==t.type?(n=t.name+": "+t.value,t.package&&(n+=` (${t.package})`)):"h"==t.type?n=`${t.name}  (${t.package})`:"s"==t.type?n="(subroutine) "+e:["o","x"].includes(t.type)?n="(method) "+e:["t","i"].includes(t.type)?(n="(subroutine) "+t.name,t.typeDetail&&t.typeDetail!=t.name&&(n+=` (${t.typeDetail})`)):n="p"==t.type?"(package) "+t.name:"m"==t.type?`(module) ${t.name}: `+t.file:"l"==t.type?"(label) "+e:"a"==t.type?"(class) "+e:"b"==t.type?"(role) "+e:"f"==t.type||"d"==t.type?"(attribute) "+e:"e"==t.type?"(phase) "+e:"Unknown: "+e),n}(n,o);if(e)return{contents:e}}},8620:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableMods=t.getDefinition=void 0;const s=n(7373),a=n(7147),c=n(1878),u=n(1017),l=n(3775);function o(e){return/(?:Sub[\\\/]Defer\.pm|Moo[\\\/]Object\.pm|Moose[\\\/]Object\.pm)$/.test(e)}t.getDefinition=function(e,r,t,i){e=e.position,t=(0,c.getSymbol)(e,t);if(t){i=(0,c.lookupSymbol)(r,i,t,e.line);if(0!=i.length){let n=[];return i.forEach(t=>{t=function(e,t){if(t.file&&!o(t.file))return t;if(t.package){const n=e.elems.get(t.package);if(null!=n&&n.length&&n[0].file&&!o(t.file))return n[0]}}(r,t);if(t){let e;if(r.filePath!==t.file){if(!(0,a.existsSync)(t.file))return;e=s.default.file((0,a.realpathSync)(t.file)).toString()}else e=r.uri;t={uri:e,range:{start:{line:t.line,character:0},end:{line:t.line,character:500}}};n.push(t)}}),n}}},t.getAvailableMods=async function(e,t){let n=[];n=n.concat((0,c.getIncPaths)(e,t));var r=(0,u.join)((0,l.getPerlAssetsPath)(),"lib_bs22","ModHunter.pl");n.push(r),(0,c.nLog)("Starting to look for perl modules with "+n.join(" "),t);const i=new Map;let o;try{o=(await(0,c.async_execFile)(t.perlPath,n,{timeout:9e4,maxBuffer:20971520})).stdout,(0,c.nLog)("Success running mod hunter",t)}catch(e){return(0,c.nLog)("ModHunter failed. You will lose autocomplete on importing modules. Not a huge deal",t),(0,c.nLog)(e,t),i}return o.split("\n").forEach(e=>{var n=e.split("\t");5==n.length&&"M"==n[1]&&n[2]&&n[3]&&(0,a.realpath)(n[3],function(e,t){e||t&&(e=s.default.file(t).toString(),i.set(n[2],e))})}),i}},7994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildNav=void 0,t.buildNav=async function(e,t,n){e=e.replace(/\r/g,"");let u={elems:new Map,canonicalElems:new Map,imported:new Map,parents:new Map,filePath:t,uri:n};return e.split("\n").forEach(e=>{var t,n,r,i,o,s,a,c=u,e=e.split("\t");if(7==e.length&&e[0]&&"_"!=e[0])t=e[0],n=e[1]||"",r=e[2]||"",i=e[3]||"",o=e[4]||"",s=(a=e[5].split(";"))[0]?+a[0]:0,a=a[1]?+a[1]:s,e=e[6]||"","u"==n?c.imported.set(t,s):"2"==n?c.parents.set(t,r):(r={name:t,type:n,typeDetail:r,file:i,package:o,line:s,lineEnd:a,value:e},1<n.length&&c.canonicalElems.set(t,r),"1"!=n&&(i=c.elems,o=t,s=r,(a=i.get(o)||[]).push(s),i.set(o,a)))}),u}},4221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endProgress=t.startProgress=void 0;const r=n(273),i=n(2961);t.startProgress=async function(e,t,n){return n.enableProgress?(n=(0,i.nanoid)(),await e.sendRequest("window/workDoneProgress/create",{token:n}),t={title:t,cancellable:!1,kind:"begin"},e.sendProgress(r.WorkDoneProgress.type,n,t),n):null},t.endProgress=function(e,t){t&&e.sendProgress(r.WorkDoneProgress.type,t,{kind:"end"})}},3351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWorkspaceSymbols=t.getSymbols=void 0;const o=n(8212),s=n(4042);t.getSymbols=function(e,i){return function(i,o){let s=0;return new Promise((t,n)=>{const r=setInterval(()=>{100<++s&&(n("Found no document"),clearInterval(r));var e=i.get(o);e&&(t(e),clearInterval(r))},100)})}(e,i).then(e=>{let r=[];return null!=(e=e.elems)&&e.forEach((e,n)=>{e.forEach(e=>{let t;if(e.type==s.PerlSymbolKind.LocalSub)t=o.SymbolKind.Function;else if(e.type==s.PerlSymbolKind.LocalMethod)t=o.SymbolKind.Method;else if(e.type==s.PerlSymbolKind.Package)t=o.SymbolKind.Package;else if(e.type==s.PerlSymbolKind.Class)t=o.SymbolKind.Class;else if(e.type==s.PerlSymbolKind.Role)t=o.SymbolKind.Interface;else if(e.type==s.PerlSymbolKind.Field)t=o.SymbolKind.Field;else if(e.type==s.PerlSymbolKind.Label)t=o.SymbolKind.Key;else if(e.type==s.PerlSymbolKind.Phaser)t=o.SymbolKind.Event;else{if(e.type!=s.PerlSymbolKind.Constant)return;t=o.SymbolKind.Constant}e={kind:t,location:{range:{start:{line:e.line,character:0},end:{line:e.lineEnd,character:100}},uri:i},name:n};r.push(e)})}),r}).catch(e=>[])},t.getWorkspaceSymbols=function(r,i){return new Promise((e,t)=>{let n=[];r.query.toLowerCase(),i.forEach((e,t)=>{e={range:{start:{line:0,character:0},end:{line:0,character:100}},uri:e};n.push({name:t,kind:o.SymbolKind.Module,location:e})}),e(n)})}},4042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerlSymbolKind=void 0,(t=t.PerlSymbolKind||(t.PerlSymbolKind={})).Module="m",t.Package="p",t.Class="a",t.Role="b",t.ImportedSub="t",t.Inherited="i",t.Field="f",t.PathedField="d",t.LocalSub="s",t.LocalMethod="o",t.Method="x",t.LocalVar="v",t.Constant="n",t.Label="l",t.Phaser="e",t.Canonical="1",t.ImportedVar="c",t.ImportedHash="h"},1878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPerlimportsProfile=t.nLog=t.lookupSymbol=t.getSymbol=t.getIncPaths=t.async_execFile=void 0;const a=n(7373),r=n(2081),i=n(3837),c=n(4042),o=n(1017);function u(e,t){let n=e[0];for(var r=0;r<e.length;r++)(e[r].line>n.line&&e[r].line<=t||e[r].line==n.line&&e[r].type==c.PerlSymbolKind.Package)&&(n=e[r]);return n}function s(e,t){t.logging&&console.log(e)}t.async_execFile=(0,i.promisify)(r.execFile),t.getIncPaths=function(e,n){let r=[];return n.includePaths.forEach(t=>{/\$workspaceFolder/.test(t)?e?e.forEach(e=>{e=a.default.parse(e.uri).fsPath;r=r.concat(["-I",t.replace(/\$workspaceFolder/g,e)])}):s("You used $workspaceFolder in your config, but didn't add any workspace folders. Skipping "+t,n):r=r.concat(["-I",t])}),n.includeLib&&e&&e.forEach(e=>{e=a.default.parse(e.uri).fsPath;r=r.concat(["-I",o.join(e,"lib")])}),r},t.getSymbol=function(e,t){const n={line:e.line,character:0},r={line:e.line+1,character:0},i=t.getText({start:n,end:r}),o=t.offsetAt(e)-t.offsetAt(n),s=/[\p{L}\p{N}_:>-]/u,a=/[\p{L}\p{N}_]/u,c=e=>a.exec(e);let u=o-1,l=o;for(l<i.length&&(["$","%","@"].includes(i[l])||c(i[l]))&&(l+=1,u+=1);0<=u&&(d=i[u],s.exec(d))&&!(">"===i[u]&&0<=u-1&&"-"!==i[u-1]);)--u;var d;for(u=Math.max(0,u+1);l<i.length&&c(i[l]);)l+=1;l=Math.max(u,l);let h=i.substring(u,l);var e=0<u?i[u-1]:"",t=1<u?i[u-2]:"",p=l<i.length?i[l]:"";return"$"===e?h="["===p&&"$"!=t?"@"+h:"{"===p&&"$"!=t?"%"+h:"$"+h:["@","%"].includes(e)?h=e+h:"{"===e&&"}"===p&&["$","%","@"].includes(t)&&(h=t+h),h},t.lookupSymbol=function(e,r,t,n){let i=e.elems.get(t);if(null!=i&&i.length)return[u(i,n)];r=r.get(t);if(r){const e=a.default.parse(r).fsPath;return[{name:t,type:c.PerlSymbolKind.Module,typeDetail:"",file:e,package:t,line:0,lineEnd:0,value:""}]}let o=t,s=/^(\$\w+)\-\>SUPER\b/.exec(t);if(s){r=e.elems.get(s[1]);if(null!=r&&r.length){const t=u(r,n);if(t.package){const r=e.parents.get(t.package);r&&(o=o.replace(/^\$\w+\-\>SUPER/,r))}}}n=/^(\$\w+)\->(?:\w+)$/.exec(t);if(n){const r=e.canonicalElems.get(n[1]);r&&(o=o.replace(/^\$\w+(?=\->)/,r.type))}for(const r of["_init","BUILD"])if(i=e.elems.get(t.replace(/->new$/,"::"+r)),null!=i&&i.length)return[i[0]];if(null!=(i=e.elems.get(t.replace(/DBI->new$/,"DBI::connect")))&&i.length)return[i[0]];if(o=o.replace(/->/g,"::"),null!=(i=e.elems.get(o))&&i.length)return[i[0]];if(o.includes("::")&&t.includes("->")){const r=o.split("::").pop();if(r){if(null!=(i=e.elems.get(r))&&i.length)return[i[0]];let n=[];if(e.elems.forEach((e,t)=>{e=e[0];t.split("::").pop()==r&&n.push(e)}),0<n.length)return n}}return[]},t.nLog=s,t.getPerlimportsProfile=function(e){var t=[];return e.perlimportsProfile&&t.push("--config-file",e.perlimportsProfile),t}},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},2961:e=>{e.exports={nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(r,i=21)=>(e=i)=>{let t="",n=e;for(;n--;)t+=r[Math.random()*r.length|0];return t}}}},r={};function E(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,E)),t.exports}E.d=(e,t)=>{for(var n in t)E.o(t,n)&&!E.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},E.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),E.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const t=E(8212),u=E(1017),e=E(6813),l=E(7373),d=E(4540),n=E(3775),i=E(8620),r=E(3351),o=E(1400),s=E(5347),a=E(8254),h=E(1878),p=E(4221);var c=E(9593);const f=(0,t.createConnection)(t.ProposedFeatures.all),g=new t.TextDocuments(e.TextDocument);let m=!1,y;f.onInitialize(e=>{e=e.capabilities,m=!(!e.workspace||!e.workspace.configuration),y=!(!e.workspace||!e.workspace.workspaceFolders),e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!1,triggerCharacters:["$","@","%","-",">",":"]},definitionProvider:!0,documentSymbolProvider:!0,workspaceSymbolProvider:!0,hoverProvider:!0,documentFormattingProvider:!0,documentRangeFormattingProvider:!0}};return y&&(e.capabilities.workspace={workspaceFolders:{supported:!0}}),e}),f.onInitialized(()=>{m&&f.client.register(t.DidChangeConfigurationNotification.type,void 0)});const v={perlPath:"perl",enableWarnings:!0,perlimportsProfile:"",perltidyProfile:"",perlcriticProfile:"",perlcriticEnabled:!0,perlcriticSeverity:void 0,perlcriticTheme:void 0,perlcriticExclude:void 0,perlcriticInclude:void 0,perlimportsLintEnabled:!1,perlimportsTidyEnabled:!1,perltidyEnabled:!0,severity5:"warning",severity4:"info",severity3:"hint",severity2:"hint",severity1:"hint",includePaths:[],includeLib:!0,logging:!1,enableProgress:!1};let b=v;const R=new Map,w=new Map,_=new c({max:35e4,length:function(e,t){return e.elems.size}}),P=new Map,T=new Map;let C=!1;async function S(e){var e=await D(e.uri),t=await k(),t=await(0,i.getAvailableMods)(t,e);T.set("default",t)}async function k(){try{return await f.workspace.getWorkspaceFolders()||[]}catch(e){return[]}}async function D(e){if(!m)return b;let t=R.get(e);var n;return t||((t=await f.workspace.getConfiguration({scopeUri:e,section:"perlnavigator"}))?(n={...b,...t},R.set(e,n),n):b)}async function x(n){var e=l.default.parse(n.uri).fsPath,e=(0,u.basename)(e),r=await D(n.uri),e=((0,h.nLog)("Found settings",r),_.has(n.uri)?null:await(0,p.startProgress)(f,"Initializing "+e,r)),i=Date.now(),o=await k(),s=(0,d.perlcompile)(n,o,r),a=(0,d.perlcritic)(n,o,r),o=(0,d.perlimports)(n,o,r),s=await s,c=((0,h.nLog)("Compilation Time: "+(Date.now()-i)/1e3+" seconds",r),w.get(n.uri));if(s){let e=s.diags,t=(c&&r.perlcriticEnabled&&(e=s.diags.concat(c)),q({uri:n.uri,diagnostics:e}),_.set(n.uri,s.perlDoc),c=await a,a=await o,[]);if(r.perlcriticEnabled&&(t=t.concat(c),(0,h.nLog)("Perl Critic Time: "+(Date.now()-i)/1e3+" seconds",r)),r.perlimportsLintEnabled&&(t=t.concat(a),(0,h.nLog)(`perlimports Time: ${(Date.now()-i)/1e3} seconds`,r)),w.set(n.uri,t),t){const u=s.diags.concat(t);q({uri:n.uri,diagnostics:u})}}(0,p.endProgress)(f,e)}function q(e){g.get(e.uri)?f.sendDiagnostics(e):f.sendDiagnostics({uri:e.uri,diagnostics:[]})}g.onDidClose(e=>{R.delete(e.document.uri),w.delete(e.document.uri),_.del(e.document.uri),f.sendDiagnostics({uri:e.document.uri,diagnostics:[]})}),g.onDidOpen(e=>{x(e.document),async function(e){C||(C=!0,S(e))}(e.document)}),g.onDidSave(e=>{x(e.document)}),g.onDidChangeContent(e=>{var t=P.get(e.document.uri),t=(t&&clearTimeout(t),setTimeout(function(){x(e.document)},1e3));P.set(e.document.uri,t)}),f.onDidChangeConfiguration(async e=>{var t;if(m?R.clear():b={...v,...null==(t=null==e?void 0:e.settings)?void 0:t.perlnavigator},null!=(t=null==e?void 0:e.settings)&&t.perlnavigator){await!(0<(e=g.all()).length&&(C=!0,S(e[e.length-1])));for(const e of g.all())await x(e)}}),f.onCompletion(e=>{let t=g.get(e.textDocument.uri),n=_.get(e.textDocument.uri),r=T.get("default");if(t&&n)return r=r||new Map,{items:(0,s.getCompletions)(e,n,t,r),isIncomplete:!1}}),f.onHover(e=>{let t=g.get(e.textDocument.uri),n=_.get(e.textDocument.uri),r=T.get("default");if(r=r||new Map,t&&n)return(0,o.getHover)(e,n,t,r)}),f.onDefinition(e=>{let t=g.get(e.textDocument.uri),n=_.get(e.textDocument.uri),r=T.get("default");if(r=r||new Map,t&&n)return(0,i.getDefinition)(e,n,t,r)}),f.onDocumentSymbol(e=>(0,r.getSymbols)(_,e.textDocument.uri)),f.onWorkspaceSymbol(e=>{var t=T.get("default");if(t)return(0,r.getWorkspaceSymbols)(e,t)}),f.onDocumentFormatting(async e=>{var t=g.get(e.textDocument.uri),n=R.get(e.textDocument.uri),r=await k();if(t&&n)return(0,a.formatDoc)(e,t,n,r,f)}),f.onDocumentRangeFormatting(async e=>{var t=g.get(e.textDocument.uri),n=R.get(e.textDocument.uri),r=await k();if(t&&n)return(0,a.formatRange)(e,t,n,r,f)}),f.onShutdown(e=>{try{(0,n.cleanupTemporaryAssetPath)()}catch(e){}}),process.on("unhandledRejection",function(e,t){console.log("Caught an unhandled Rejection at: Promise ",t," reason: ",e)}),g.listen(f),f.listen()})()})();