# SoftGitUp 使用说明

## 系统概述

SoftGitUp 是一个跨平台的软件同步工具，包含两个主要组件：

1. **本地管理工具** (`soft_manager.py`) - 管理本地软件目录，生成索引文件
2. **后台同步工具** (`soft_sync.py`) - 后台运行，定时从GitHub同步更新

## 安装步骤

### 1. 安装Python依赖
```bash
pip install -r requirements.txt
```

### 2. 配置GitHub仓库
确保您的GitHub仓库地址正确配置在 `config.json` 中：
```json
{
    "github_repo": "https://github.com/shellsec/softgitup"
}
```

## 使用方法

### 本地管理工具

#### 功能说明
- 扫描本地软件目录
- 计算文件哈希值
- 生成软件列表文件 (`list.txt`)
- 自动提交到GitHub

#### 运行方式
```bash
# 方式1: 直接运行Python脚本
python soft_manager.py

# 方式2: 使用批处理文件
start_manager.bat
```

#### 工作流程
1. 将软件文件放入对应的目录（如 `software/notepad++/`）
2. 运行管理工具
3. 工具自动扫描并生成 `list.txt`
4. 自动提交到GitHub仓库

### 后台同步工具

#### 功能说明
- 后台运行，系统托盘图标
- 定时同步（默认每天7点）
- 自动下载并覆盖本地文件
- 支持手动同步

#### 运行方式
```bash
# 方式1: 直接运行Python脚本
python soft_sync.py

# 方式2: 使用批处理文件
start_sync.bat
```

#### 系统托盘功能
- **立即同步**: 手动触发同步操作
- **查看日志**: 打开同步日志文件
- **设置**: 查看当前配置
- **退出**: 关闭同步工具

## 目录结构

```
softgitup/
├── software/                 # 软件存放目录
│   ├── notepad++/           # Notepad++ 软件目录
│   ├── sublimetext/         # SublimeText 软件目录
│   ├── winrar/              # WinRAR 软件目录
│   └── everything/          # Everything 软件目录
├── logs/                    # 日志目录
│   ├── manager.log          # 管理工具日志
│   └── sync.log             # 同步工具日志
├── config.json              # 主配置文件
├── list.txt                 # 软件列表文件（自动生成）
├── soft_manager.py          # 本地管理工具
├── soft_sync.py             # 后台同步工具
├── requirements.txt         # Python依赖
└── README.md               # 项目说明
```

## 配置文件说明

### config.json
```json
{
    "github_repo": "https://github.com/shellsec/softgitup",  // GitHub仓库地址
    "list_file": "list.txt",                                 // 列表文件名
    "sync_time": "07:00",                                    // 同步时间
    "software_dirs": {                                       // 软件目录配置
        "notepad++": "notepad++",
        "sublimetext": "sublimetext",
        "winrar": "winrar",
        "everything": "everything"
    },
    "local_base_path": "./software",                        // 本地软件路径
    "log_level": "INFO",                                     // 日志级别
    "auto_start": true,                                      // 自动启动
    "check_interval": 3600                                   // 检查间隔（秒）
}
```

## 打包成可执行文件

### 使用PyInstaller打包
```bash
python build_exe.py
```

打包后的文件将生成在 `dist/` 目录中：
- `SoftGitUp_Manager.exe` - 管理工具
- `SoftGitUp_Sync.exe` - 同步工具

## 常见问题

### Q: 如何修改同步时间？
A: 编辑 `config.json` 文件中的 `sync_time` 字段，格式为 "HH:MM"

### Q: 如何添加新的软件？
A: 在 `config.json` 的 `software_dirs` 中添加新条目，并在 `software/` 目录下创建对应文件夹

### Q: 同步失败怎么办？
A: 检查网络连接，查看 `logs/sync.log` 日志文件获取详细错误信息

### Q: 如何查看同步状态？
A: 右键点击系统托盘图标，选择"查看日志"或"设置"

## 注意事项

1. **首次使用**: 需要先运行管理工具生成初始的 `list.txt` 文件
2. **Git配置**: 确保本地Git已正确配置GitHub仓库
3. **网络要求**: 同步工具需要网络连接访问GitHub
4. **权限要求**: 确保程序有读写本地文件的权限
5. **防火墙**: 如果使用防火墙，请允许程序访问网络

## 技术支持

如遇到问题，请查看日志文件或联系技术支持。 